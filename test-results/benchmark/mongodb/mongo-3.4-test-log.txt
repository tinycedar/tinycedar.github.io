
部分测试没对 YCSB 的 JVM 参数进行调优。使用默认 JVM 参数跑出来的结果都是 GC 次数几千次，GC 总时间 10秒左右。
优化后 GC 次数约 150 次，GC 总时间约 400 毫秒。

客户端、服务端禁用 netfilter 相关模块后，吞吐率在部分场景下可能有 3% 的提升。其他官方建议的调优项在云盘上看不出差别。

---

## 3.0.3  MMAPv1

---

服务端：mongod 占 CPU 250%，内存（RSS）6G
客户端：16 线程时，CPU 250%，RSS 500M

---

### Workload A （50% 读，50% 更新）

#### 16 线程:

（数据目录设 noatime、readahead 设 16KB）
[OVERALL], RunTime(ms), 1800018
[OVERALL], Throughput(ops/sec), 9796.315370179631
[TOTAL_GCS_PS_Scavenge], Count, 141
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 176
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.009777680000977769
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 141
[TOTAL_GC_TIME], Time(ms), 176
[TOTAL_GC_TIME_%], Time(%), 0.009777680000977769
[READ], Operations, 8815175
[READ], AverageLatency(us), 1575.7204050968926
[READ], MinLatency(us), 216
[READ], MaxLatency(us), 204927
[READ], 95thPercentileLatency(us), 2485
[READ], 99thPercentileLatency(us), 3319
[READ], Return=OK, 8815175
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 180.625
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2863
[CLEANUP], 95thPercentileLatency(us), 11
[CLEANUP], 99thPercentileLatency(us), 2863
[UPDATE], Operations, 8818369
[UPDATE], AverageLatency(us), 1682.590587896696
[UPDATE], MinLatency(us), 310
[UPDATE], MaxLatency(us), 205695
[UPDATE], 95thPercentileLatency(us), 2619
[UPDATE], 99thPercentileLatency(us), 3497
[UPDATE], Return=OK, 8818369

（没设 JVM 参数，未关 netfilter）
[OVERALL], RunTime(ms), 2052584.0
[OVERALL], Throughput(ops/sec), 9743.81560023853
[TOTAL_GCS_PS_Scavenge], Count, 7936.0
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 15022.0
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.7318579897339159
[TOTAL_GCS_PS_MarkSweep], Count, 130.0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 2152.0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.10484345585856658
[TOTAL_GCs], Count, 8066.0
[TOTAL_GC_TIME], Time(ms), 17174.0
[TOTAL_GC_TIME_%], Time(%), 0.8367014455924825
[READ], Operations, 1.0002879E7
[READ], AverageLatency(us), 1584.4112435029954
[READ], MinLatency(us), 243.0
[READ], MaxLatency(us), 175615.0
[READ], 95thPercentileLatency(us), 2529.0
[READ], 99thPercentileLatency(us), 3567.0
[READ], Return=OK, 10002879
[CLEANUP], Operations, 16.0
[CLEANUP], AverageLatency(us), 142.5625
[CLEANUP], MinLatency(us), 2.0
[CLEANUP], MaxLatency(us), 2211.0
[CLEANUP], 95thPercentileLatency(us), 15.0
[CLEANUP], 99thPercentileLatency(us), 2211.0
[UPDATE], Operations, 9997121.0
[UPDATE], AverageLatency(us), 1689.0165864752462
[UPDATE], MinLatency(us), 310.0
[UPDATE], MaxLatency(us), 175999.0
[UPDATE], 95thPercentileLatency(us), 2665.0
[UPDATE], 99thPercentileLatency(us), 3739.0
[UPDATE], Return=OK, 9997121

32 线程:
可以看出 95、99百分位数的响应时间几乎翻倍，说明16线程就能压到最大吞吐率了，客户端加再多线程请求也只能排队。

（没设 JVM 参数，未关 netfilter）
[OVERALL], RunTime(ms), 2060912.0
[OVERALL], Throughput(ops/sec), 9704.441528798901
[TOTAL_GCS_PS_Scavenge], Count, 6828.0
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 14743.0
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.715362907295411
[TOTAL_GCS_PS_MarkSweep], Count, 136.0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 2269.0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.11009688914422353
[TOTAL_GCs], Count, 6964.0
[TOTAL_GC_TIME], Time(ms), 17012.0
[TOTAL_GC_TIME_%], Time(%), 0.8254597964396345
[READ], Operations, 1.0000925E7
[READ], AverageLatency(us), 3240.5608025257666
[READ], MinLatency(us), 240.0
[READ], MaxLatency(us), 323839.0
[READ], 95thPercentileLatency(us), 4871.0
[READ], 99thPercentileLatency(us), 6863.0
[READ], Return=OK, 10000925
[CLEANUP], Operations, 32.0
[CLEANUP], AverageLatency(us), 84.53125
[CLEANUP], MinLatency(us), 1.0
[CLEANUP], MaxLatency(us), 2641.0
[CLEANUP], 95thPercentileLatency(us), 3.0
[CLEANUP], 99thPercentileLatency(us), 2641.0
[UPDATE], Operations, 9999075.0
[UPDATE], AverageLatency(us), 3342.658240887282
[UPDATE], MinLatency(us), 315.0
[UPDATE], MaxLatency(us), 323839.0
[UPDATE], 95thPercentileLatency(us), 5015.0
[UPDATE], 99thPercentileLatency(us), 7043.0
[UPDATE], Return=OK, 9999075

---

### Workload B

#### 16 线程：

（数据目录设 noatime、readahead 设 16KB）
[OVERALL], RunTime(ms), 1077797
[OVERALL], Throughput(ops/sec), 18556.370077110994
[TOTAL_GCS_PS_Scavenge], Count, 130
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 156
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.014473968660146577
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 130
[TOTAL_GC_TIME], Time(ms), 156
[TOTAL_GC_TIME_%], Time(%), 0.014473968660146577
[READ], Operations, 19000894
[READ], AverageLatency(us), 849.7561828932892
[READ], MinLatency(us), 198
[READ], MaxLatency(us), 130559
[READ], 95thPercentileLatency(us), 1809
[READ], 99thPercentileLatency(us), 2455
[READ], Return=OK, 19000894
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 196.875
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 3093
[CLEANUP], 95thPercentileLatency(us), 22
[CLEANUP], 99thPercentileLatency(us), 3093
[UPDATE], Operations, 999106
[UPDATE], AverageLatency(us), 1020.2702425968816
[UPDATE], MinLatency(us), 307
[UPDATE], MaxLatency(us), 130943
[UPDATE], 95thPercentileLatency(us), 2006
[UPDATE], 99thPercentileLatency(us), 2699
[UPDATE], Return=OK, 999106

（未关 netfilter）
[OVERALL], RunTime(ms), 1192594
[OVERALL], Throughput(ops/sec), 16770.166544523952
[TOTAL_GCS_PS_Scavenge], Count, 141
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 369
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.030940957274646696
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 141
[TOTAL_GC_TIME], Time(ms), 369
[TOTAL_GC_TIME_%], Time(%), 0.030940957274646696
[READ], Operations, 19000622
[READ], AverageLatency(us), 940.3368491831478
[READ], MinLatency(us), 221
[READ], MaxLatency(us), 132479
[READ], 95thPercentileLatency(us), 1974
[READ], 99thPercentileLatency(us), 2691
[READ], Return=OK, 19000622
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 169.75
[CLEANUP], MinLatency(us), 2
[CLEANUP], MaxLatency(us), 2603
[CLEANUP], 95thPercentileLatency(us), 22
[CLEANUP], 99thPercentileLatency(us), 2603
[UPDATE], Operations, 999378
[UPDATE], AverageLatency(us), 1128.3805316907117
[UPDATE], MinLatency(us), 330
[UPDATE], MaxLatency(us), 22991
[UPDATE], 95thPercentileLatency(us), 2193
[UPDATE], 99thPercentileLatency(us), 2973
[UPDATE], Return=OK, 999378

（没设 JVM 参数，未关 netfilter）
[OVERALL], RunTime(ms), 1186057.0
[OVERALL], Throughput(ops/sec), 16862.595979788493
[TOTAL_GCS_PS_Scavenge], Count, 3321.0
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 9281.0
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.782508766442085
[TOTAL_GCS_PS_MarkSweep], Count, 95.0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 1549.0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.13060080586346187
[TOTAL_GCs], Count, 3416.0
[TOTAL_GC_TIME], Time(ms), 10830.0
[TOTAL_GC_TIME_%], Time(%), 0.9131095723055469
[READ], Operations, 1.9000852E7
[READ], AverageLatency(us), 934.4454351836433
[READ], MinLatency(us), 220.0
[READ], MaxLatency(us), 164607.0
[READ], 95thPercentileLatency(us), 1959.0
[READ], 99thPercentileLatency(us), 2775.0
[READ], Return=OK, 19000852
[CLEANUP], Operations, 16.0
[CLEANUP], AverageLatency(us), 141.6875
[CLEANUP], MinLatency(us), 3.0
[CLEANUP], MaxLatency(us), 2151.0
[CLEANUP], 95thPercentileLatency(us), 25.0
[CLEANUP], 99thPercentileLatency(us), 2151.0
[UPDATE], Operations, 999148.0
[UPDATE], AverageLatency(us), 1122.129679486923
[UPDATE], MinLatency(us), 319.0
[UPDATE], MaxLatency(us), 150655.0
[UPDATE], 95thPercentileLatency(us), 2185.0
[UPDATE], 99thPercentileLatency(us), 3101.0
[UPDATE], Return=OK, 999148

---

### Workload C

#### 16 线程:

（数据目录设 noatime、readahead 设 16KB）
[OVERALL], RunTime(ms), 1162112
[OVERALL], Throughput(ops/sec), 17210.045159158497
[TOTAL_GCS_PS_Scavenge], Count, 125
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 148
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.012735433417777288
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 125
[TOTAL_GC_TIME], Time(ms), 148
[TOTAL_GC_TIME_%], Time(%), 0.012735433417777288
[READ], Operations, 20000000
[READ], AverageLatency(us), 925.91465615
[READ], MinLatency(us), 214
[READ], MaxLatency(us), 130815
[READ], 95thPercentileLatency(us), 1871
[READ], 99thPercentileLatency(us), 2699
[READ], Return=OK, 20000000

[OVERALL], RunTime(ms), 1030895
[OVERALL], Throughput(ops/sec), 19400.617909680423
[TOTAL_GCS_PS_Scavenge], Count, 125
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 154
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.014938475790453924
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 125
[TOTAL_GC_TIME], Time(ms), 154
[TOTAL_GC_TIME_%], Time(%), 0.014938475790453924
[READ], Operations, 20000000
[READ], AverageLatency(us), 820.92845065
[READ], MinLatency(us), 203
[READ], MaxLatency(us), 147327
[READ], 95thPercentileLatency(us), 1781
[READ], 99thPercentileLatency(us), 2355
[READ], Return=OK, 20000000

（未关 netfilter）
[OVERALL], RunTime(ms), 1073314
[OVERALL], Throughput(ops/sec), 18633.87601391578
[TOTAL_GCS_PS_Scavenge], Count, 137
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 354
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03298196054463093
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 137
[TOTAL_GC_TIME], Time(ms), 354
[TOTAL_GC_TIME_%], Time(%), 0.03298196054463093
[READ], Operations, 20000000
[READ], AverageLatency(us), 854.5547552
[READ], MinLatency(us), 217
[READ], MaxLatency(us), 153983
[READ], 95thPercentileLatency(us), 1856
[READ], 99thPercentileLatency(us), 2423
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 149.875
[CLEANUP], MinLatency(us), 2
[CLEANUP], MaxLatency(us), 2335
[CLEANUP], 95thPercentileLatency(us), 19
[CLEANUP], 99thPercentileLatency(us), 2335

（没设 JVM 参数，未关 netfilter）
[OVERALL], RunTime(ms), 1119507.0
[OVERALL], Throughput(ops/sec), 17865.006650248724
[TOTAL_GCS_PS_Scavenge], Count, 3152.0
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 9113.0
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.8140190280185832
[TOTAL_GCS_PS_MarkSweep], Count, 67.0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 1125.0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.10049066240764909
[TOTAL_GCs], Count, 3219.0
[TOTAL_GC_TIME], Time(ms), 10238.0
[TOTAL_GC_TIME_%], Time(%), 0.9145096904262323
[READ], Operations, 2.0E7
[READ], AverageLatency(us), 890.8487029
[READ], MinLatency(us), 217.0
[READ], MaxLatency(us), 125183.0
[READ], 95thPercentileLatency(us), 1950.0
[READ], 99thPercentileLatency(us), 2625.0
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16.0
[CLEANUP], AverageLatency(us), 181.375
[CLEANUP], MinLatency(us), 4.0
[CLEANUP], MaxLatency(us), 2749.0
[CLEANUP], 95thPercentileLatency(us), 30.0
[CLEANUP], 99thPercentileLatency(us), 2749.0

（没设 JVM 参数，未关 netfilter）
[OVERALL], RunTime(ms), 1093291
[OVERALL], Throughput(ops/sec), 18293.3912380144
[TOTAL_GCS_PS_Scavenge], Count, 3030
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 8491
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.7766459250099014
[TOTAL_GCS_PS_MarkSweep], Count, 73
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 1083
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.09905871355384797
[TOTAL_GCs], Count, 3103
[TOTAL_GC_TIME], Time(ms), 9574
[TOTAL_GC_TIME_%], Time(%), 0.8757046385637494
[READ], Operations, 20000000
[READ], AverageLatency(us), 870.31481755
[READ], MinLatency(us), 206
[READ], MaxLatency(us), 145535
[READ], 95thPercentileLatency(us), 1885
[READ], 99thPercentileLatency(us), 2573
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 232.6875
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 3679
[CLEANUP], 95thPercentileLatency(us), 12
[CLEANUP], 99thPercentileLatency(us), 3679

---

### Workload D

#### 16 线程，30 分钟：

（数据目录设 noatime、readahead 设 16KB）
[OVERALL], RunTime(ms), 1800024
[OVERALL], Throughput(ops/sec), 9771.610822966804
[TOTAL_GCS_PS_Scavenge], Count, 125
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 225
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.012499833335555526
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 125
[TOTAL_GC_TIME], Time(ms), 225
[TOTAL_GC_TIME_%], Time(%), 0.012499833335555526
[READ], Operations, 16710897
[READ], AverageLatency(us), 1628.3407937347708
[READ], MinLatency(us), 217
[READ], MaxLatency(us), 237567
[READ], 95thPercentileLatency(us), 3413
[READ], 99thPercentileLatency(us), 4831
[READ], Return=OK, 16710897
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 138.1875
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2163
[CLEANUP], 95thPercentileLatency(us), 18
[CLEANUP], 99thPercentileLatency(us), 2163
[INSERT], Operations, 878237
[INSERT], AverageLatency(us), 1730.5882933650028
[INSERT], MinLatency(us), 320
[INSERT], MaxLatency(us), 178815
[INSERT], 95thPercentileLatency(us), 3413
[INSERT], 99thPercentileLatency(us), 4939
[INSERT], Return=OK, 878237

---

### Workload E

#### 16 线程，30 分钟：

（数据目录设 noatime、readahead 设 16KB）
[OVERALL], RunTime(ms), 1800038
[OVERALL], Throughput(ops/sec), 1166.5670391402848
[TOTAL_GCS_PS_Scavenge], Count, 420
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 803
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.04461016934086947
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 420
[TOTAL_GC_TIME], Time(ms), 803
[TOTAL_GC_TIME_%], Time(%), 0.04461016934086947
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 125.5
[CLEANUP], MinLatency(us), 0
[CLEANUP], MaxLatency(us), 1985
[CLEANUP], 95thPercentileLatency(us), 8
[CLEANUP], 99thPercentileLatency(us), 1985
[INSERT], Operations, 105380
[INSERT], AverageLatency(us), 11071.783213133422
[INSERT], MinLatency(us), 350
[INSERT], MaxLatency(us), 458495
[INSERT], 95thPercentileLatency(us), 15311
[INSERT], 99thPercentileLatency(us), 211071
[INSERT], Return=OK, 105380
[SCAN], Operations, 1994485
[SCAN], AverageLatency(us), 13849.173942646848
[SCAN], MinLatency(us), 351
[SCAN], MaxLatency(us), 478207
[SCAN], 95thPercentileLatency(us), 35551
[SCAN], 99thPercentileLatency(us), 216319
[SCAN], Return=OK, 1994485

[OVERALL], RunTime(ms), 1800021
[OVERALL], Throughput(ops/sec), 1173.7101956032734
[TOTAL_GCS_PS_Scavenge], Count, 422
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 793
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.04405504158007045
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 422
[TOTAL_GC_TIME], Time(ms), 793
[TOTAL_GC_TIME_%], Time(%), 0.04405504158007045
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 98.25
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1542
[CLEANUP], 95thPercentileLatency(us), 11
[CLEANUP], 99thPercentileLatency(us), 1542
[INSERT], Operations, 105949
[INSERT], AverageLatency(us), 10879.632842216539
[INSERT], MinLatency(us), 349
[INSERT], MaxLatency(us), 461567
[INSERT], 95thPercentileLatency(us), 8935
[INSERT], 99thPercentileLatency(us), 211455
[INSERT], Return=OK, 105949
[SCAN], Operations, 2006754
[SCAN], AverageLatency(us), 13771.62773812834
[SCAN], MinLatency(us), 350
[SCAN], MaxLatency(us), 639999
[SCAN], 95thPercentileLatency(us), 179327
[SCAN], 99thPercentileLatency(us), 216703
[SCAN], Return=OK, 2006754

（未关 netfilter）
[OVERALL], RunTime(ms), 1800196
[OVERALL], Throughput(ops/sec), 1168.812173785521
[TOTAL_GCS_PS_Scavenge], Count, 461
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 921
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.05116109579179156
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 461
[TOTAL_GC_TIME], Time(ms), 921
[TOTAL_GC_TIME_%], Time(%), 0.05116109579179156
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 162.5625
[CLEANUP], MinLatency(us), 2
[CLEANUP], MaxLatency(us), 2557
[CLEANUP], 95thPercentileLatency(us), 15
[CLEANUP], 99thPercentileLatency(us), 2557
[INSERT], Operations, 105239
[INSERT], AverageLatency(us), 11023.060433869574
[INSERT], MinLatency(us), 365
[INSERT], MaxLatency(us), 607231
[INSERT], 95thPercentileLatency(us), 17167
[INSERT], 99thPercentileLatency(us), 215423
[INSERT], Return=OK, 105239
[SCAN], Operations, 1998852
[SCAN], AverageLatency(us), 13781.073003904241
[SCAN], MinLatency(us), 350
[SCAN], MaxLatency(us), 631807
[SCAN], 95thPercentileLatency(us), 28479
[SCAN], 99thPercentileLatency(us), 219135
[SCAN], Return=OK, 1998852

---

### Workload F

#### 16 线程:

（数据目录设 noatime、readahead 设 16KB）
[OVERALL], RunTime(ms), 1800023
[OVERALL], Throughput(ops/sec), 8122.939540216986
[TOTAL_GCS_PS_Scavenge], Count, 160
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 209
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.01161096274880932
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 160
[TOTAL_GC_TIME], Time(ms), 209
[TOTAL_GC_TIME_%], Time(%), 0.01161096274880932
[READ], Operations, 14621478
[READ], AverageLatency(us), 1273.078797847933
[READ], MinLatency(us), 207
[READ], MaxLatency(us), 131839
[READ], 95thPercentileLatency(us), 2177
[READ], 99thPercentileLatency(us), 3017
[READ], Return=OK, 14621478
[READ-MODIFY-WRITE], Operations, 7310748
[READ-MODIFY-WRITE], AverageLatency(us), 2659.4646153854574
[READ-MODIFY-WRITE], MinLatency(us), 577
[READ-MODIFY-WRITE], MaxLatency(us), 157055
[READ-MODIFY-WRITE], 95thPercentileLatency(us), 4071
[READ-MODIFY-WRITE], 99thPercentileLatency(us), 5383
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 117.6875
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1834
[CLEANUP], 95thPercentileLatency(us), 11
[CLEANUP], 99thPercentileLatency(us), 1834
[UPDATE], Operations, 7310748
[UPDATE], AverageLatency(us), 1382.1414193185158
[UPDATE], MinLatency(us), 290
[UPDATE], MaxLatency(us), 126911
[UPDATE], 95thPercentileLatency(us), 2333
[UPDATE], 99thPercentileLatency(us), 3203
[UPDATE], Return=OK, 7310748

（没设 JVM 参数，未关 netfilter）
[OVERALL], RunTime(ms), 2556273.0
[OVERALL], Throughput(ops/sec), 7823.8904843105565
[TOTAL_GCS_PS_Scavenge], Count, 7857.0
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 18529.0
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.7248443339189515
[TOTAL_GCS_PS_MarkSweep], Count, 263.0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 4380.0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.17134320160640118
[TOTAL_GCs], Count, 8120.0
[TOTAL_GC_TIME], Time(ms), 22909.0
[TOTAL_GC_TIME_%], Time(%), 0.8961875355253527
[READ], Operations, 2.0E7
[READ], AverageLatency(us), 1320.451079
[READ], MinLatency(us), 218.0
[READ], MaxLatency(us), 129535.0
[READ], 95thPercentileLatency(us), 2301.0
[READ], 99thPercentileLatency(us), 3439.0
[READ], Return=OK, 20000000
[READ-MODIFY-WRITE], Operations, 1.0004167E7
[READ-MODIFY-WRITE], AverageLatency(us), 2758.7979565914884
[READ-MODIFY-WRITE], MinLatency(us), 616.0
[READ-MODIFY-WRITE], MaxLatency(us), 153215.0
[READ-MODIFY-WRITE], 95thPercentileLatency(us), 4307.0
[READ-MODIFY-WRITE], 99thPercentileLatency(us), 6007.0
[CLEANUP], Operations, 16.0
[CLEANUP], AverageLatency(us), 135.0
[CLEANUP], MinLatency(us), 2.0
[CLEANUP], MaxLatency(us), 2089.0
[CLEANUP], 95thPercentileLatency(us), 33.0
[CLEANUP], 99thPercentileLatency(us), 2089.0
[UPDATE], Operations, 1.0004167E7
[UPDATE], AverageLatency(us), 1433.1151508166547
[UPDATE], MinLatency(us), 302.0
[UPDATE], MaxLatency(us), 96319.0
[UPDATE], 95thPercentileLatency(us), 2479.0
[UPDATE], 99thPercentileLatency(us), 3683.0
[UPDATE], Return=OK, 10004167

---

### Workload A - load

#### 16 线程:

（数据目录设 noatime、readahead 设 16KB）
[OVERALL], RunTime(ms), 5229261
[OVERALL], Throughput(ops/sec), 3824.6321994637483
[TOTAL_GCS_PS_Scavenge], Count, 288
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 429
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.00820383606784974
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 288
[TOTAL_GC_TIME], Time(ms), 429
[TOTAL_GC_TIME_%], Time(%), 0.00820383606784974
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 130.1875
[CLEANUP], MinLatency(us), 2
[CLEANUP], MaxLatency(us), 1997
[CLEANUP], 95thPercentileLatency(us), 15
[CLEANUP], 99thPercentileLatency(us), 1997
[INSERT], Operations, 20000000
[INSERT], AverageLatency(us), 4179.6516257
[INSERT], MinLatency(us), 337
[INSERT], MaxLatency(us), 16842751
[INSERT], 95thPercentileLatency(us), 4903
[INSERT], 99thPercentileLatency(us), 7035
[INSERT], Return=OK, 20000000

（未关 netfilter）
[OVERALL], RunTime(ms), 5099010
[OVERALL], Throughput(ops/sec), 3922.330020925631
[TOTAL_GCS_PS_Scavenge], Count, 285
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 478
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.009374368750012258
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 285
[TOTAL_GC_TIME], Time(ms), 478
[TOTAL_GC_TIME_%], Time(%), 0.009374368750012258
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 145.125
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2191
[CLEANUP], 95thPercentileLatency(us), 54
[CLEANUP], 99thPercentileLatency(us), 2191
[INSERT], Operations, 20000000
[INSERT], AverageLatency(us), 4074.85633845
[INSERT], MinLatency(us), 361
[INSERT], MaxLatency(us), 10354687
[INSERT], 95thPercentileLatency(us), 4851
[INSERT], 99thPercentileLatency(us), 6791
[INSERT], Return=OK, 20000000

---

## 3.4.13  WiredTiger

---

服务端：mongod 占 CPU 330%

---

### Workload A （50% 读，50% 更新）

#### 8 线程，只跑10分钟：

（未关 netfilter）
[OVERALL], RunTime(ms), 600013
[OVERALL], Throughput(ops/sec), 11141.871926108268
[TOTAL_GCS_PS_Scavenge], Count, 58
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 160
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.026666088901407134
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 58
[TOTAL_GC_TIME], Time(ms), 160
[TOTAL_GC_TIME_%], Time(%), 0.026666088901407134
[READ], Operations, 3341971
[READ], AverageLatency(us), 649.1962123549247
[READ], MinLatency(us), 234
[READ], MaxLatency(us), 293375
[READ], 95thPercentileLatency(us), 1145
[READ], 99thPercentileLatency(us), 1709
[READ], Return=OK, 3341971
[CLEANUP], Operations, 8
[CLEANUP], AverageLatency(us), 325.625
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2585
[CLEANUP], 95thPercentileLatency(us), 2585
[CLEANUP], 99thPercentileLatency(us), 2585
[CLEANUP], 2585, 1.0
[UPDATE], Operations, 3343297
[UPDATE], AverageLatency(us), 778.2866780905197
[UPDATE], MinLatency(us), 339
[UPDATE], MaxLatency(us), 293375
[UPDATE], 95thPercentileLatency(us), 1310
[UPDATE], 99thPercentileLatency(us), 1899
[UPDATE], Return=OK, 3343297

#### 12 线程，只跑5分钟：

（未关 netfilter）
[OVERALL], RunTime(ms), 300015
[OVERALL], Throughput(ops/sec), 13681.232605036415
[TOTAL_GCS_PS_Scavenge], Count, 37
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 129
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.04299785010749463
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 37
[TOTAL_GC_TIME], Time(ms), 129
[TOTAL_GC_TIME_%], Time(%), 0.04299785010749463
[READ], Operations, 2051821
[READ], AverageLatency(us), 809.4163847626085
[READ], MinLatency(us), 245
[READ], MaxLatency(us), 349951
[READ], 95thPercentileLatency(us), 1470
[READ], 99thPercentileLatency(us), 2225
[READ], Return=OK, 2051821
[CLEANUP], Operations, 12
[CLEANUP], AverageLatency(us), 224.83333333333334
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2673
[CLEANUP], 95thPercentileLatency(us), 14
[CLEANUP], 99thPercentileLatency(us), 2673
[UPDATE], Operations, 2052754
[UPDATE], AverageLatency(us), 935.4482802128263
[UPDATE], MinLatency(us), 320
[UPDATE], MaxLatency(us), 349951
[UPDATE], 95thPercentileLatency(us), 1654
[UPDATE], 99thPercentileLatency(us), 2439
[UPDATE], Return=OK, 2052754

#### 16 线程：

（关了 netfilter、设了 noatime、关了 THP、readahead 设为 0、调了 vm.dirty_background_bytes）

第1次：（iowait 15%，无锁）
[OVERALL], RunTime(ms), 1276029
[OVERALL], Throughput(ops/sec), 15673.624972473197
[TOTAL_GCS_PS_Scavenge], Count, 157
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 200
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.015673624972473196
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 157
[TOTAL_GC_TIME], Time(ms), 200
[TOTAL_GC_TIME_%], Time(%), 0.015673624972473196
[READ], Operations, 10006255
[READ], AverageLatency(us), 958.3359894386061
[READ], MinLatency(us), 221
[READ], MaxLatency(us), 375295
[READ], 95thPercentileLatency(us), 1743
[READ], 99thPercentileLatency(us), 2599
[READ], Return=OK, 10006255
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 232.1875
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 3633
[CLEANUP], 95thPercentileLatency(us), 25
[CLEANUP], 99thPercentileLatency(us), 3633
[UPDATE], Operations, 9993745
[UPDATE], AverageLatency(us), 1073.845514869551
[UPDATE], MinLatency(us), 302
[UPDATE], MaxLatency(us), 375551
[UPDATE], 95thPercentileLatency(us), 1913
[UPDATE], 99thPercentileLatency(us), 2787
[UPDATE], Return=OK, 9993745

第2次：
[OVERALL], RunTime(ms), 1276060
[OVERALL], Throughput(ops/sec), 15673.244204817955
[TOTAL_GCS_PS_Scavenge], Count, 162
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 195
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.015281413099697508
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 162
[TOTAL_GC_TIME], Time(ms), 195
[TOTAL_GC_TIME_%], Time(%), 0.015281413099697508
[READ], Operations, 10002286
[READ], AverageLatency(us), 957.6115060097262
[READ], MinLatency(us), 217
[READ], MaxLatency(us), 337919
[READ], 95thPercentileLatency(us), 1734
[READ], 99thPercentileLatency(us), 2603
[READ], Return=OK, 10002286
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 132.25
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2069
[CLEANUP], 95thPercentileLatency(us), 11
[CLEANUP], 99thPercentileLatency(us), 2069
[UPDATE], Operations, 9997714
[UPDATE], AverageLatency(us), 1074.1180486859296
[UPDATE], MinLatency(us), 303
[UPDATE], MaxLatency(us), 338175
[UPDATE], 95thPercentileLatency(us), 1905
[UPDATE], 99thPercentileLatency(us), 2785
[UPDATE], Return=OK, 9997714

第3次：
[OVERALL], RunTime(ms), 1281002
[OVERALL], Throughput(ops/sec), 15612.778122126272
[TOTAL_GCS_PS_Scavenge], Count, 160
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 193
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.015066330887851854
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 160
[TOTAL_GC_TIME], Time(ms), 193
[TOTAL_GC_TIME_%], Time(%), 0.015066330887851854
[READ], Operations, 9999532
[READ], AverageLatency(us), 961.0757786464407
[READ], MinLatency(us), 229
[READ], MaxLatency(us), 396799
[READ], 95thPercentileLatency(us), 1686
[READ], 99thPercentileLatency(us), 2487
[READ], Return=OK, 9999532
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 108.4375
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1676
[CLEANUP], 95thPercentileLatency(us), 21
[CLEANUP], 99thPercentileLatency(us), 1676
[UPDATE], Operations, 10000468
[UPDATE], AverageLatency(us), 1080.2910205802368
[UPDATE], MinLatency(us), 323
[UPDATE], MaxLatency(us), 397055
[UPDATE], 95thPercentileLatency(us), 1864
[UPDATE], 99thPercentileLatency(us), 2689
[UPDATE], Return=OK, 10000468

第4次：
[OVERALL], RunTime(ms), 1297045
[OVERALL], Throughput(ops/sec), 15419.66547035762
[TOTAL_GCS_PS_Scavenge], Count, 156
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 200
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.015419665470357622
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 156
[TOTAL_GC_TIME], Time(ms), 200
[TOTAL_GC_TIME_%], Time(%), 0.015419665470357622
[READ], Operations, 10000703
[READ], AverageLatency(us), 974.1948577015036
[READ], MinLatency(us), 227
[READ], MaxLatency(us), 386559
[READ], 95thPercentileLatency(us), 1747
[READ], 99thPercentileLatency(us), 2615
[READ], Return=OK, 10000703
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 111.8125
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1747
[CLEANUP], 95thPercentileLatency(us), 11
[CLEANUP], 99thPercentileLatency(us), 1747
[UPDATE], Operations, 9999297
[UPDATE], AverageLatency(us), 1092.3671485105403
[UPDATE], MinLatency(us), 328
[UPDATE], MaxLatency(us), 386815
[UPDATE], 95thPercentileLatency(us), 1920
[UPDATE], 99thPercentileLatency(us), 2805
[UPDATE], Return=OK, 9999297

---

（设了 noatime、关了 THP、IO调度设为 noop）
[OVERALL], RunTime(ms), 600017
[OVERALL], Throughput(ops/sec), 15157.498870865325
[TOTAL_GCS_PS_Scavenge], Count, 74
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 111
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.018499475848184302
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 74
[TOTAL_GC_TIME], Time(ms), 111
[TOTAL_GC_TIME_%], Time(%), 0.018499475848184302
[READ], Operations, 4545702
[READ], AverageLatency(us), 991.1569530954735
[READ], MinLatency(us), 226
[READ], MaxLatency(us), 388863
[READ], 95thPercentileLatency(us), 1793
[READ], 99thPercentileLatency(us), 2693
[READ], Return=OK, 4545702
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 199.3125
[CLEANUP], MinLatency(us), 0
[CLEANUP], MaxLatency(us), 3169
[CLEANUP], 95thPercentileLatency(us), 9
[CLEANUP], 99thPercentileLatency(us), 3169
[UPDATE], Operations, 4549055
[UPDATE], AverageLatency(us), 1111.8915352749088
[UPDATE], MinLatency(us), 322
[UPDATE], MaxLatency(us), 388863
[UPDATE], 95thPercentileLatency(us), 1968
[UPDATE], 99thPercentileLatency(us), 2893
[UPDATE], Return=OK, 4549055

（设了 noatime、关了 THP、readahead 设为 0）
[OVERALL], RunTime(ms), 1272626
[OVERALL], Throughput(ops/sec), 15715.536221953662
[TOTAL_GCS_PS_Scavenge], Count, 173
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 413
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03245258229833431
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 173
[TOTAL_GC_TIME], Time(ms), 413
[TOTAL_GC_TIME_%], Time(%), 0.03245258229833431
[READ], Operations, 10000372
[READ], AverageLatency(us), 955.4832914215591
[READ], MinLatency(us), 223
[READ], MaxLatency(us), 417023
[READ], 95thPercentileLatency(us), 1715
[READ], 99thPercentileLatency(us), 2563
[READ], Return=OK, 10000372
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 206.625
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 3257
[CLEANUP], 95thPercentileLatency(us), 12
[CLEANUP], 99thPercentileLatency(us), 3257
[UPDATE], Operations, 9999628
[UPDATE], AverageLatency(us), 1071.0448865697804
[UPDATE], MinLatency(us), 314
[UPDATE], MaxLatency(us), 416511
[UPDATE], 95thPercentileLatency(us), 1881
[UPDATE], 99thPercentileLatency(us), 2747
[UPDATE], Return=OK, 9999628

[OVERALL], RunTime(ms), 1277024
[OVERALL], Throughput(ops/sec), 15661.412784724484
[TOTAL_GCS_PS_Scavenge], Count, 172
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 425
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03328050216753953
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 172
[TOTAL_GC_TIME], Time(ms), 425
[TOTAL_GC_TIME_%], Time(%), 0.03328050216753953
[READ], Operations, 9998917
[READ], AverageLatency(us), 959.3392575415918
[READ], MinLatency(us), 233
[READ], MaxLatency(us), 463103
[READ], 95thPercentileLatency(us), 1735
[READ], 99thPercentileLatency(us), 2597
[READ], Return=OK, 9998917
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 116.875
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1791
[CLEANUP], 95thPercentileLatency(us), 24
[CLEANUP], 99thPercentileLatency(us), 1791
[UPDATE], Operations, 10001083
[UPDATE], AverageLatency(us), 1074.2449486720589
[UPDATE], MinLatency(us), 326
[UPDATE], MaxLatency(us), 463359
[UPDATE], 95thPercentileLatency(us), 1900
[UPDATE], 99thPercentileLatency(us), 2767
[UPDATE], Return=OK, 10001083

（设了 noatime、关了 THP）
[OVERALL], RunTime(ms), 300024
[OVERALL], Throughput(ops/sec), 15356.411487081034
[TOTAL_GCS_PS_Scavenge], Count, 38
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 64
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.021331626803189077
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 38
[TOTAL_GC_TIME], Time(ms), 64
[TOTAL_GC_TIME_%], Time(%), 0.021331626803189077
[READ], Operations, 2302511
[READ], AverageLatency(us), 976.4418745447905
[READ], MinLatency(us), 213
[READ], MaxLatency(us), 331263
[READ], 95thPercentileLatency(us), 1756
[READ], 99thPercentileLatency(us), 2639
[READ], Return=OK, 2302511
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 200.75
[CLEANUP], MinLatency(us), 0
[CLEANUP], MaxLatency(us), 3191
[CLEANUP], 95thPercentileLatency(us), 10
[CLEANUP], 99thPercentileLatency(us), 3191
[UPDATE], Operations, 2304781
[UPDATE], AverageLatency(us), 1098.1807412504702
[UPDATE], MinLatency(us), 331
[UPDATE], MaxLatency(us), 331263
[UPDATE], 95thPercentileLatency(us), 1935
[UPDATE], 99thPercentileLatency(us), 2841
[UPDATE], Return=OK, 2304781

[OVERALL], RunTime(ms), 1237193
[OVERALL], Throughput(ops/sec), 16165.626543312159
[TOTAL_GCS_PS_Scavenge], Count, 173
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 429
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03467526893540458
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 173
[TOTAL_GC_TIME], Time(ms), 429
[TOTAL_GC_TIME_%], Time(%), 0.03467526893540458
[READ], Operations, 9996564
[READ], AverageLatency(us), 929.7357101900213
[READ], MinLatency(us), 222
[READ], MaxLatency(us), 442623
[READ], 95thPercentileLatency(us), 1672
[READ], 99thPercentileLatency(us), 2489
[READ], Return=OK, 9996564
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 134.5625
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2017
[CLEANUP], 95thPercentileLatency(us), 47
[UPDATE], Operations, 10003436
[UPDATE], AverageLatency(us), 1039.8843263454678
[UPDATE], MinLatency(us), 307
[UPDATE], MaxLatency(us), 442879
[UPDATE], 95thPercentileLatency(us), 1835
[UPDATE], 99thPercentileLatency(us), 2665
[UPDATE], Return=OK, 10003436

[OVERALL], RunTime(ms), 1290165
[OVERALL], Throughput(ops/sec), 15501.893168703227
[TOTAL_GCS_PS_Scavenge], Count, 173
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 434
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.033639108176086
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 173
[TOTAL_GC_TIME], Time(ms), 434
[TOTAL_GC_TIME_%], Time(%), 0.033639108176086
[READ], Operations, 9998321
[READ], AverageLatency(us), 968.9932290631597
[READ], MinLatency(us), 230
[READ], MaxLatency(us), 677375
[READ], 95thPercentileLatency(us), 1795
[READ], 99thPercentileLatency(us), 2769
[READ], Return=OK, 9998321
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 159.5
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2457
[CLEANUP], 95thPercentileLatency(us), 15
[CLEANUP], 99thPercentileLatency(us), 2457
[UPDATE], Operations, 10001679
[UPDATE], AverageLatency(us), 1085.1532030772034
[UPDATE], MinLatency(us), 319
[UPDATE], MaxLatency(us), 677375
[UPDATE], 95thPercentileLatency(us), 1958
[UPDATE], 99thPercentileLatency(us), 2957
[UPDATE], Return=OK, 10001679

（关了 THP）
[OVERALL], RunTime(ms), 1295409
[OVERALL], Throughput(ops/sec), 15439.139298862367
[TOTAL_GCS_PS_Scavenge], Count, 167
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 421
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03249938822410528
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 167
[TOTAL_GC_TIME], Time(ms), 421
[TOTAL_GC_TIME_%], Time(%), 0.03249938822410528
[READ], Operations, 9997724
[READ], AverageLatency(us), 974.3377385692984
[READ], MinLatency(us), 232
[READ], MaxLatency(us), 489471
[READ], 95thPercentileLatency(us), 1802
[READ], 99thPercentileLatency(us), 2723
[READ], Return=OK, 9997724
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 145.0
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2225
[CLEANUP], 95thPercentileLatency(us), 54
[CLEANUP], 99thPercentileLatency(us), 2225
[UPDATE], Operations, 10002276
[UPDATE], AverageLatency(us), 1088.611515918977
[UPDATE], MinLatency(us), 309
[UPDATE], MaxLatency(us), 489727
[UPDATE], 95thPercentileLatency(us), 1971
[UPDATE], 99thPercentileLatency(us), 2925
[UPDATE], Return=OK, 10002276

（未关 netfilter）
[OVERALL], RunTime(ms), 1313419
[OVERALL], Throughput(ops/sec), 15227.433134437677
[TOTAL_GCS_PS_Scavenge], Count, 172
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 436
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03319580423307414
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 172
[TOTAL_GC_TIME], Time(ms), 436
[TOTAL_GC_TIME_%], Time(%), 0.03319580423307414
[READ], Operations, 9996780
[READ], AverageLatency(us), 992.3618166049467
[READ], MinLatency(us), 239
[READ], MaxLatency(us), 920575
[READ], 95thPercentileLatency(us), 1872
[READ], 99thPercentileLatency(us), 2811
[READ], Return=OK, 9996780
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 121.8125
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1893
[CLEANUP], 95thPercentileLatency(us), 12
[CLEANUP], 99thPercentileLatency(us), 1893
[UPDATE], Operations, 10003220
[UPDATE], AverageLatency(us), 1099.609783049858
[UPDATE], MinLatency(us), 328
[UPDATE], MaxLatency(us), 926719
[UPDATE], 95thPercentileLatency(us), 2022
[UPDATE], 99thPercentileLatency(us), 2973
[UPDATE], Return=OK, 10003220

#### 32 线程：

同样，16线程就够了。

（未关 netfilter）
[OVERALL], RunTime(ms), 1305146
[OVERALL], Throughput(ops/sec), 15323.956093801
[TOTAL_GCS_PS_Scavenge], Count, 172
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 482
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03693073418606041
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 172
[TOTAL_GC_TIME], Time(ms), 482
[TOTAL_GC_TIME_%], Time(%), 0.03693073418606041
[READ], Operations, 10000684
[READ], AverageLatency(us), 2030.3492244130503
[READ], MinLatency(us), 256
[READ], MaxLatency(us), 452607
[READ], 95thPercentileLatency(us), 4025
[READ], 99thPercentileLatency(us), 5951
[READ], Return=OK, 10000684
[CLEANUP], Operations, 32
[CLEANUP], AverageLatency(us), 71.25
[CLEANUP], MinLatency(us), 0
[CLEANUP], MaxLatency(us), 2187
[CLEANUP], 95thPercentileLatency(us), 11
[CLEANUP], 99thPercentileLatency(us), 2187
[UPDATE], Operations, 9999316
[UPDATE], AverageLatency(us), 2134.1007718927976
[UPDATE], MinLatency(us), 336
[UPDATE], MaxLatency(us), 453119
[UPDATE], 95thPercentileLatency(us), 4171
[UPDATE], 99thPercentileLatency(us), 6095
[UPDATE], Return=OK, 9999316

---

### Workload B （95% 读，5% 更新）

#### 16 线程：

（关了 netfilter、设了 noatime、关了 THP、readahead 设为 0、调了 vm.dirty_background_bytes）
第1次：
[OVERALL], RunTime(ms), 1050152
[OVERALL], Throughput(ops/sec), 19044.86207710884
[TOTAL_GCS_PS_Scavenge], Count, 129
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 152
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.014474095178602717
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 129
[TOTAL_GC_TIME], Time(ms), 152
[TOTAL_GC_TIME_%], Time(%), 0.014474095178602717
[READ], Operations, 18998511
[READ], AverageLatency(us), 829.7386987853943
[READ], MinLatency(us), 219
[READ], MaxLatency(us), 132095
[READ], 95thPercentileLatency(us), 1748
[READ], 99thPercentileLatency(us), 2395
[READ], Return=OK, 18998511
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 125.1875
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1964
[CLEANUP], 95thPercentileLatency(us), 12
[CLEANUP], 99thPercentileLatency(us), 1964
[UPDATE], Operations, 1001489
[UPDATE], AverageLatency(us), 958.8514781490361
[UPDATE], MinLatency(us), 322
[UPDATE], MaxLatency(us), 26559
[UPDATE], 95thPercentileLatency(us), 1902
[UPDATE], 99thPercentileLatency(us), 2567
[UPDATE], Return=OK, 1001489

第2次：
[OVERALL], RunTime(ms), 1065711
[OVERALL], Throughput(ops/sec), 18766.81389232165
[TOTAL_GCS_PS_Scavenge], Count, 129
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 161
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.015107285183318931
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 129
[TOTAL_GC_TIME], Time(ms), 161
[TOTAL_GC_TIME_%], Time(%), 0.015107285183318931
[READ], Operations, 18998832
[READ], AverageLatency(us), 841.6874483652468
[READ], MinLatency(us), 210
[READ], MaxLatency(us), 293119
[READ], 95thPercentileLatency(us), 1759
[READ], 99thPercentileLatency(us), 2435
[READ], Return=OK, 18998832
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 138.8125
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2171
[CLEANUP], 95thPercentileLatency(us), 12
[CLEANUP], 99thPercentileLatency(us), 2171
[UPDATE], Operations, 1001168
[UPDATE], AverageLatency(us), 978.2178235820562
[UPDATE], MinLatency(us), 344
[UPDATE], MaxLatency(us), 293119
[UPDATE], 95thPercentileLatency(us), 1918
[UPDATE], 99thPercentileLatency(us), 2615
[UPDATE], Return=OK, 1001168

第3次：
[OVERALL], RunTime(ms), 1040327
[OVERALL], Throughput(ops/sec), 19224.72453372834
[TOTAL_GCS_PS_Scavenge], Count, 129
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 159
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.015283656004314028
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 129
[TOTAL_GC_TIME], Time(ms), 159
[TOTAL_GC_TIME_%], Time(%), 0.015283656004314028
[READ], Operations, 19002091
[READ], AverageLatency(us), 821.8635714353752
[READ], MinLatency(us), 222
[READ], MaxLatency(us), 129535
[READ], 95thPercentileLatency(us), 1745
[READ], 99thPercentileLatency(us), 2377
[READ], Return=OK, 19002091
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 130.5
[CLEANUP], MinLatency(us), 2
[CLEANUP], MaxLatency(us), 1999
[CLEANUP], 95thPercentileLatency(us), 21
[CLEANUP], 99thPercentileLatency(us), 1999
[UPDATE], Operations, 997909
[UPDATE], AverageLatency(us), 951.2609185807523
[UPDATE], MinLatency(us), 335
[UPDATE], MaxLatency(us), 128383
[UPDATE], 95thPercentileLatency(us), 1898
[UPDATE], 99thPercentileLatency(us), 2553
[UPDATE], Return=OK, 997909

第4次：
[OVERALL], RunTime(ms), 1002429
[OVERALL], Throughput(ops/sec), 19951.53771489053
[TOTAL_GCS_PS_Scavenge], Count, 129
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 155
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.01546244172904016
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 129
[TOTAL_GC_TIME], Time(ms), 155
[TOTAL_GC_TIME_%], Time(%), 0.01546244172904016
[READ], Operations, 18999806
[READ], AverageLatency(us), 791.853137237296
[READ], MinLatency(us), 210
[READ], MaxLatency(us), 129151
[READ], 95thPercentileLatency(us), 1694
[READ], 99thPercentileLatency(us), 2295
[READ], Return=OK, 18999806
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 159.25
[CLEANUP], MinLatency(us), 2
[CLEANUP], MaxLatency(us), 2421
[CLEANUP], 95thPercentileLatency(us), 33
[CLEANUP], 99thPercentileLatency(us), 2421
[UPDATE], Operations, 1000194
[UPDATE], AverageLatency(us), 916.1017842538547
[UPDATE], MinLatency(us), 338
[UPDATE], MaxLatency(us), 126079
[UPDATE], 95thPercentileLatency(us), 1840
[UPDATE], 99thPercentileLatency(us), 2455
[UPDATE], Return=OK, 1000194

---

[OVERALL], RunTime(ms), 1049447
[OVERALL], Throughput(ops/sec), 19057.65607982109
[TOTAL_GCS_PS_Scavenge], Count, 142
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 362
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.034494357504476165
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 142
[TOTAL_GC_TIME], Time(ms), 362
[TOTAL_GC_TIME_%], Time(%), 0.034494357504476165
[READ], Operations, 18999021
[READ], AverageLatency(us), 828.9405351991558
[READ], MinLatency(us), 201
[READ], MaxLatency(us), 141311
[READ], 95thPercentileLatency(us), 1802
[READ], 99thPercentileLatency(us), 2439
[READ], Return=OK, 18999021
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 163.4375
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2555
[CLEANUP], 95thPercentileLatency(us), 19
[CLEANUP], 99thPercentileLatency(us), 2555
[UPDATE], Operations, 1000979
[UPDATE], AverageLatency(us), 952.3420641192273
[UPDATE], MinLatency(us), 327
[UPDATE], MaxLatency(us), 152063
[UPDATE], 95thPercentileLatency(us), 1947
[UPDATE], 99thPercentileLatency(us), 2607
[UPDATE], Return=OK, 1000979

[OVERALL], RunTime(ms), 1026352
[OVERALL], Throughput(ops/sec), 19486.491963770713
[TOTAL_GCS_PS_Scavenge], Count, 141
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 360
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.035075685534787286
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 141
[TOTAL_GC_TIME], Time(ms), 360
[TOTAL_GC_TIME_%], Time(%), 0.035075685534787286
[READ], Operations, 19001421
[READ], AverageLatency(us), 810.9643345621362
[READ], MinLatency(us), 215
[READ], MaxLatency(us), 153471
[READ], 95thPercentileLatency(us), 1752
[READ], 99thPercentileLatency(us), 2351
[READ], Return=OK, 19001421
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 153.6875
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2373
[CLEANUP], 95thPercentileLatency(us), 39
[CLEANUP], 99thPercentileLatency(us), 2373
[UPDATE], Operations, 998579
[UPDATE], AverageLatency(us), 930.0190010004216
[UPDATE], MinLatency(us), 317
[UPDATE], MaxLatency(us), 27359
[UPDATE], 95thPercentileLatency(us), 1889
[UPDATE], 99thPercentileLatency(us), 2501
[UPDATE], Return=OK, 998579

[OVERALL], RunTime(ms), 1048324
[OVERALL], Throughput(ops/sec), 19078.071283305544
[TOTAL_GCS_PS_Scavenge], Count, 141
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 349
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03329123438936817
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 141
[TOTAL_GC_TIME], Time(ms), 349
[TOTAL_GC_TIME_%], Time(%), 0.03329123438936817
[READ], Operations, 18999530
[READ], AverageLatency(us), 828.1330416594516
[READ], MinLatency(us), 216
[READ], MaxLatency(us), 153215
[READ], 95thPercentileLatency(us), 1794
[READ], 99thPercentileLatency(us), 2415
[READ], Return=OK, 18999530
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 131.5
[CLEANUP], MinLatency(us), 0
[CLEANUP], MaxLatency(us), 1988
[CLEANUP], 95thPercentileLatency(us), 86
[CLEANUP], 99thPercentileLatency(us), 1988
[UPDATE], Operations, 1000470
[UPDATE], AverageLatency(us), 953.7346487151038
[UPDATE], MinLatency(us), 332
[UPDATE], MaxLatency(us), 37279
[UPDATE], 95thPercentileLatency(us), 1940
[UPDATE], 99thPercentileLatency(us), 2581
[UPDATE], Return=OK, 1000470

（未关 netfilter）
[OVERALL], RunTime(ms), 1083510
[OVERALL], Throughput(ops/sec), 18458.528301538518
[TOTAL_GCS_PS_Scavenge], Count, 141
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 356
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03285618037673856
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 141
[TOTAL_GC_TIME], Time(ms), 356
[TOTAL_GC_TIME_%], Time(%), 0.03285618037673856
[READ], Operations, 18999934
[READ], AverageLatency(us), 856.2300363253894
[READ], MinLatency(us), 225
[READ], MaxLatency(us), 166655
[READ], 95thPercentileLatency(us), 1859
[READ], 99thPercentileLatency(us), 2551
[READ], Return=OK, 18999934
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 174.625
[CLEANUP], MinLatency(us), 3
[CLEANUP], MaxLatency(us), 2691
[CLEANUP], 95thPercentileLatency(us), 15
[CLEANUP], 99thPercentileLatency(us), 2691
[UPDATE], Operations, 1000066
[UPDATE], AverageLatency(us), 981.385892531093
[UPDATE], MinLatency(us), 332
[UPDATE], MaxLatency(us), 27791
[UPDATE], 95thPercentileLatency(us), 2009
[UPDATE], 99thPercentileLatency(us), 2725
[UPDATE], Return=OK, 1000066

---

### Workload C

#### 16 线程：

（关了 netfilter、设了 noatime、关了 THP、readahead 设为 0、调了 vm.dirty_background_bytes）
第1次：
[OVERALL], RunTime(ms), 988535
[OVERALL], Throughput(ops/sec), 20231.959414689412
[TOTAL_GCS_PS_Scavenge], Count, 124
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 147
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.01487049016979672
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 124
[TOTAL_GC_TIME], Time(ms), 147
[TOTAL_GC_TIME_%], Time(%), 0.01487049016979672
[READ], Operations, 20000000
[READ], AverageLatency(us), 787.3606215
[READ], MinLatency(us), 221
[READ], MaxLatency(us), 138751
[READ], 95thPercentileLatency(us), 1706
[READ], 99thPercentileLatency(us), 2249
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 137.6875
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2155
[CLEANUP], 95thPercentileLatency(us), 11
[CLEANUP], 99thPercentileLatency(us), 2155

第2次：
[OVERALL], RunTime(ms), 1016049
[OVERALL], Throughput(ops/sec), 19684.090038964656
[TOTAL_GCS_PS_Scavenge], Count, 126
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 146
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.0143693857284442
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 126
[TOTAL_GC_TIME], Time(ms), 146
[TOTAL_GC_TIME_%], Time(%), 0.0143693857284442
[READ], Operations, 20000000
[READ], AverageLatency(us), 809.02742825
[READ], MinLatency(us), 212
[READ], MaxLatency(us), 124991
[READ], 95thPercentileLatency(us), 1747
[READ], 99thPercentileLatency(us), 2333
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 157.0625
[CLEANUP], MinLatency(us), 2
[CLEANUP], MaxLatency(us), 2409
[CLEANUP], 95thPercentileLatency(us), 17
[CLEANUP], 99thPercentileLatency(us), 2409

第3次：
[OVERALL], RunTime(ms), 1006256
[OVERALL], Throughput(ops/sec), 19875.65788427597
[TOTAL_GCS_PS_Scavenge], Count, 125
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 151
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.015006121702628357
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 125
[TOTAL_GC_TIME], Time(ms), 151
[TOTAL_GC_TIME_%], Time(%), 0.015006121702628357
[READ], Operations, 20000000
[READ], AverageLatency(us), 800.85186825
[READ], MinLatency(us), 210
[READ], MaxLatency(us), 132863
[READ], 95thPercentileLatency(us), 1744
[READ], 99thPercentileLatency(us), 2311
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 197.0
[CLEANUP], MinLatency(us), 2
[CLEANUP], MaxLatency(us), 3061
[CLEANUP], 95thPercentileLatency(us), 20
[CLEANUP], 99thPercentileLatency(us), 3061

第4次：
[OVERALL], RunTime(ms), 1005802
[OVERALL], Throughput(ops/sec), 19884.629380335293
[TOTAL_GCS_PS_Scavenge], Count, 125
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 147
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.014615202594546442
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 125
[TOTAL_GC_TIME], Time(ms), 147
[TOTAL_GC_TIME_%], Time(%), 0.014615202594546442
[READ], Operations, 20000000
[READ], AverageLatency(us), 801.0563962
[READ], MinLatency(us), 214
[READ], MaxLatency(us), 121471
[READ], 95thPercentileLatency(us), 1732
[READ], 99thPercentileLatency(us), 2311
[READ], Return=OK, 20000000

---

（设了 noatime、关了 THP、readahead 设为 0）
[OVERALL], RunTime(ms), 1002644
[OVERALL], Throughput(ops/sec), 19947.25944602471
[TOTAL_GCS_PS_Scavenge], Count, 136
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 371
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03700216627237583
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 136
[TOTAL_GC_TIME], Time(ms), 371
[TOTAL_GC_TIME_%], Time(%), 0.03700216627237583
[READ], Operations, 20000000
[READ], AverageLatency(us), 798.41944275
[READ], MinLatency(us), 210
[READ], MaxLatency(us), 125567
[READ], 95thPercentileLatency(us), 1743
[READ], 99thPercentileLatency(us), 2295
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 144.5625
[CLEANUP], MinLatency(us), 2
[CLEANUP], MaxLatency(us), 2215
[CLEANUP], 95thPercentileLatency(us), 17
[CLEANUP], 99thPercentileLatency(us), 2215

（设了 noatime、关了 THP）
[OVERALL], RunTime(ms), 1000638
[OVERALL], Throughput(ops/sec), 19987.24813568943
[TOTAL_GCS_PS_Scavenge], Count, 136
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 329
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.032879023183209115
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 136
[TOTAL_GC_TIME], Time(ms), 329
[TOTAL_GC_TIME_%], Time(%), 0.032879023183209115
[READ], Operations, 20000000
[READ], AverageLatency(us), 796.1861871
[READ], MinLatency(us), 214
[READ], MaxLatency(us), 152063
[READ], 95thPercentileLatency(us), 1723
[READ], 99thPercentileLatency(us), 2279
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 151.375
[CLEANUP], MinLatency(us), 3
[CLEANUP], MaxLatency(us), 2293
[CLEANUP], 95thPercentileLatency(us), 24
[CLEANUP], 99thPercentileLatency(us), 2293

（关了 THP）
[OVERALL], RunTime(ms), 1009444
[OVERALL], Throughput(ops/sec), 19812.887094281603
[TOTAL_GCS_PS_Scavenge], Count, 137
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 323
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03199781265726479
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 137
[TOTAL_GC_TIME], Time(ms), 323
[TOTAL_GC_TIME_%], Time(%), 0.03199781265726479
[READ], Operations, 20000000
[READ], AverageLatency(us), 803.3135235
[READ], MinLatency(us), 204
[READ], MaxLatency(us), 165119
[READ], 95thPercentileLatency(us), 1721
[READ], 99thPercentileLatency(us), 2293
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 178.25
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2809
[CLEANUP], 95thPercentileLatency(us), 11
[CLEANUP], 99thPercentileLatency(us), 2809

[OVERALL], RunTime(ms), 996850
[OVERALL], Throughput(ops/sec), 20063.199077092842
[TOTAL_GCS_PS_Scavenge], Count, 138
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 340
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03410743843105783
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 138
[TOTAL_GC_TIME], Time(ms), 340
[TOTAL_GC_TIME_%], Time(%), 0.03410743843105783
[READ], Operations, 20000000
[READ], AverageLatency(us), 793.37941935
[READ], MinLatency(us), 216
[READ], MaxLatency(us), 172671
[READ], 95thPercentileLatency(us), 1755
[READ], 99thPercentileLatency(us), 2289
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 276.4375
[CLEANUP], MinLatency(us), 2
[CLEANUP], MaxLatency(us), 4323
[CLEANUP], 95thPercentileLatency(us), 20
[CLEANUP], 99thPercentileLatency(us), 4323

[OVERALL], RunTime(ms), 1037310
[OVERALL], Throughput(ops/sec), 19280.639346000713
[TOTAL_GCS_PS_Scavenge], Count, 136
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 327
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.03152384533071116
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 136
[TOTAL_GC_TIME], Time(ms), 327
[TOTAL_GC_TIME_%], Time(%), 0.03152384533071116
[READ], Operations, 20000000
[READ], AverageLatency(us), 825.782748
[READ], MinLatency(us), 208
[READ], MaxLatency(us), 157823
[READ], 95thPercentileLatency(us), 1784
[READ], 99thPercentileLatency(us), 2379
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 283.9375
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 4499
[CLEANUP], 95thPercentileLatency(us), 11
[CLEANUP], 99thPercentileLatency(us), 4499

[OVERALL], RunTime(ms), 1039895
[OVERALL], Throughput(ops/sec), 19232.71099486006
[TOTAL_GCS_PS_Scavenge], Count, 136
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 354
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.0340418984609023
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 136
[TOTAL_GC_TIME], Time(ms), 354
[TOTAL_GC_TIME_%], Time(%), 0.0340418984609023
[READ], Operations, 20000000
[READ], AverageLatency(us), 827.90511275
[READ], MinLatency(us), 214
[READ], MaxLatency(us), 140799
[READ], 95thPercentileLatency(us), 1809
[READ], 99thPercentileLatency(us), 2415
[READ], Return=OK, 20000000
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 175.0625
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2757
[CLEANUP], 95thPercentileLatency(us), 12
[CLEANUP], 99thPercentileLatency(us), 2757

#### 24 线程：

依然是排队了，16线程正好。

[OVERALL], RunTime(ms), 1147762
[OVERALL], Throughput(ops/sec), 17425.215332098465
[TOTAL_GCS_PS_Scavenge], Count, 136
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 364
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.031713891904419214
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 136
[TOTAL_GC_TIME], Time(ms), 364
[TOTAL_GC_TIME_%], Time(%), 0.031713891904419214
[READ], Operations, 20000000
[READ], AverageLatency(us), 1372.75555985
[READ], MinLatency(us), 224
[READ], MaxLatency(us), 170495
[READ], 95thPercentileLatency(us), 3091
[READ], 99thPercentileLatency(us), 4347
[READ], Return=OK, 20000000
[CLEANUP], Operations, 24
[CLEANUP], AverageLatency(us), 102.04166666666667
[CLEANUP], MinLatency(us), 4
[CLEANUP], MaxLatency(us), 2273
[CLEANUP], 95thPercentileLatency(us), 17
[CLEANUP], 99thPercentileLatency(us), 2273

---

### Workload D

#### 16 线程：

（关了 netfilter、设了 noatime、关了 THP、readahead 设为 0、调了 vm.dirty_background_bytes）

第1次：
（一开始iowait占50%，ops 只有1000左右，直到25分钟后才升到10000+。无很长时间的慢操作，无major fault，无大量flush）
[OVERALL], RunTime(ms), 1800017
[OVERALL], Throughput(ops/sec), 6519.022320344752
[TOTAL_GCS_PS_Scavenge], Count, 85
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 160
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.008888804939064465
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 85
[TOTAL_GC_TIME], Time(ms), 160
[TOTAL_GC_TIME_%], Time(%), 0.008888804939064465
[READ], Operations, 11148574
[READ], AverageLatency(us), 2461.2778610071564
[READ], MinLatency(us), 236
[READ], MaxLatency(us), 183935
[READ], 95thPercentileLatency(us), 9471
[READ], 99thPercentileLatency(us), 15111
[READ], Return=OK, 11148574
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 237.25
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 3767
[CLEANUP], 95thPercentileLatency(us), 14
[CLEANUP], 99thPercentileLatency(us), 3767
[INSERT], Operations, 585777
[INSERT], AverageLatency(us), 2246.857444044406
[INSERT], MinLatency(us), 319
[INSERT], MaxLatency(us), 183551
[INSERT], 95thPercentileLatency(us), 7687
[INSERT], 99thPercentileLatency(us), 13231
[INSERT], Return=OK, 585777

第2次：
[OVERALL], RunTime(ms), 1800025
[OVERALL], Throughput(ops/sec), 9127.626560742212
[TOTAL_GCS_PS_Scavenge], Count, 118
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 206
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.011444285496034778
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 118
[TOTAL_GC_TIME], Time(ms), 206
[TOTAL_GC_TIME_%], Time(%), 0.011444285496034778
[READ], Operations, 15608428
[READ], AverageLatency(us), 1753.1687454367602
[READ], MinLatency(us), 232
[READ], MaxLatency(us), 202879
[READ], 95thPercentileLatency(us), 6535
[READ], 99thPercentileLatency(us), 11127
[READ], Return=OK, 15608428
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 111.125
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1735
[CLEANUP], 95thPercentileLatency(us), 13
[CLEANUP], 99thPercentileLatency(us), 1735
[INSERT], Operations, 821528
[INSERT], AverageLatency(us), 1671.6678810703957
[INSERT], MinLatency(us), 325
[INSERT], MaxLatency(us), 159871
[INSERT], 95thPercentileLatency(us), 6395
[INSERT], 99thPercentileLatency(us), 10511
[INSERT], Return=OK, 821528

第3次：
[OVERALL], RunTime(ms), 1800027
[OVERALL], Throughput(ops/sec), 8627.670029394003
[TOTAL_GCS_PS_Scavenge], Count, 111
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 207
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.011499827502587462
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 111
[TOTAL_GC_TIME], Time(ms), 207
[TOTAL_GC_TIME_%], Time(%), 0.011499827502587462
[READ], Operations, 14753419
[READ], AverageLatency(us), 1856.0213547788483
[READ], MinLatency(us), 224
[READ], MaxLatency(us), 236543
[READ], 95thPercentileLatency(us), 6579
[READ], 99thPercentileLatency(us), 11271
[READ], Return=OK, 14753419
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 117.375
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1836
[CLEANUP], 95thPercentileLatency(us), 19
[CLEANUP], 99thPercentileLatency(us), 1836
[INSERT], Operations, 776620
[INSERT], AverageLatency(us), 1750.3038590301562
[INSERT], MinLatency(us), 302
[INSERT], MaxLatency(us), 200063
[INSERT], 95thPercentileLatency(us), 6411
[INSERT], 99thPercentileLatency(us), 10767
[INSERT], Return=OK, 776620

第4次：
[OVERALL], RunTime(ms), 1800029
[OVERALL], Throughput(ops/sec), 9841.520331061332
[TOTAL_GCS_PS_Scavenge], Count, 127
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 235
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.01305534521943813
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 127
[TOTAL_GC_TIME], Time(ms), 235
[TOTAL_GC_TIME_%], Time(%), 0.01305534521943813
[READ], Operations, 16830892
[READ], AverageLatency(us), 1625.068439272262
[READ], MinLatency(us), 229
[READ], MaxLatency(us), 233343
[READ], 95thPercentileLatency(us), 6251
[READ], 99thPercentileLatency(us), 10367
[READ], Return=OK, 16830892
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 102.3125
[CLEANUP], MinLatency(us), 0
[CLEANUP], MaxLatency(us), 1572
[CLEANUP], 95thPercentileLatency(us), 23
[CLEANUP], 99thPercentileLatency(us), 1572
[INSERT], Operations, 884130
[INSERT], AverageLatency(us), 1564.2786309705587
[INSERT], MinLatency(us), 331
[INSERT], MaxLatency(us), 233727
[INSERT], 95thPercentileLatency(us), 6139
[INSERT], 99thPercentileLatency(us), 9351
[INSERT], Return=OK, 884130

---

### Workload E

每跑1轮（30分钟）插入2万多条记录

#### 16 线程，30 分钟：

（关了 netfilter、设了 noatime、关了 THP、readahead 设为 0、调了 vm.dirty_background_bytes）

第1次：(一开始iowait 60%，后面不到3%，但速度还是上不去。无锁，基本无major fault)
[OVERALL], RunTime(ms), 1800177
[OVERALL], Throughput(ops/sec), 1115.4747560934286
[TOTAL_GCS_PS_Scavenge], Count, 402
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 761
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.04227362087172539
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 402
[TOTAL_GC_TIME], Time(ms), 761
[TOTAL_GC_TIME_%], Time(%), 0.04227362087172539
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 118.0
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1856
[CLEANUP], 95thPercentileLatency(us), 17
[CLEANUP], 99thPercentileLatency(us), 1856
[INSERT], Operations, 100486
[INSERT], AverageLatency(us), 12037.424148637621
[INSERT], MinLatency(us), 352
[INSERT], MaxLatency(us), 457727
[INSERT], 95thPercentileLatency(us), 39231
[INSERT], 99thPercentileLatency(us), 213631
[INSERT], Return=OK, 100486
[SCAN], Operations, 1907566
[SCAN], AverageLatency(us), 14459.601251542541
[SCAN], MinLatency(us), 339
[SCAN], MaxLatency(us), 473343
[SCAN], 95thPercentileLatency(us), 96831
[SCAN], 99thPercentileLatency(us), 216319
[SCAN], Return=OK, 1907566

第2次：（同上）
[OVERALL], RunTime(ms), 1800201
[OVERALL], Throughput(ops/sec), 1113.0357110122702
[TOTAL_GCS_PS_Scavenge], Count, 401
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 748
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.04155091570330202
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 401
[TOTAL_GC_TIME], Time(ms), 748
[TOTAL_GC_TIME_%], Time(%), 0.04155091570330202
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 101.125
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1591
[CLEANUP], 95thPercentileLatency(us), 9
[CLEANUP], 99thPercentileLatency(us), 1591
[INSERT], Operations, 99740
[INSERT], AverageLatency(us), 11809.17073390816
[INSERT], MinLatency(us), 359
[INSERT], MaxLatency(us), 629759
[INSERT], 95thPercentileLatency(us), 25999
[INSERT], 99thPercentileLatency(us), 214783
[INSERT], Return=OK, 99740
[SCAN], Operations, 1903948
[SCAN], AverageLatency(us), 14504.041851458129
[SCAN], MinLatency(us), 343
[SCAN], MaxLatency(us), 675327
[SCAN], 95thPercentileLatency(us), 175231
[SCAN], 99thPercentileLatency(us), 216831
[SCAN], Return=OK, 1903948

第3次：
[OVERALL], RunTime(ms), 1800116
[OVERALL], Throughput(ops/sec), 1148.0737908001483
[TOTAL_GCS_PS_Scavenge], Count, 413
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 780
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.04333054092069622
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 413
[TOTAL_GC_TIME], Time(ms), 780
[TOTAL_GC_TIME_%], Time(%), 0.04333054092069622
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 111.8125
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1755
[CLEANUP], 95thPercentileLatency(us), 9
[CLEANUP], 99thPercentileLatency(us), 1755
[INSERT], Operations, 103360
[INSERT], AverageLatency(us), 11206.762364551083
[INSERT], MinLatency(us), 356
[INSERT], MaxLatency(us), 442111
[INSERT], 95thPercentileLatency(us), 23055
[INSERT], 99thPercentileLatency(us), 212735
[INSERT], Return=OK, 103360
[SCAN], Operations, 1963306
[SCAN], AverageLatency(us), 14073.91545230341
[SCAN], MinLatency(us), 342
[SCAN], MaxLatency(us), 477183
[SCAN], 95thPercentileLatency(us), 62495
[SCAN], 99thPercentileLatency(us), 216447
[SCAN], Return=OK, 1963306

第4次：
[OVERALL], RunTime(ms), 1800025
[OVERALL], Throughput(ops/sec), 1152.3456618658074
[TOTAL_GCS_PS_Scavenge], Count, 415
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 824
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.04577714198413911
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 415
[TOTAL_GC_TIME], Time(ms), 824
[TOTAL_GC_TIME_%], Time(%), 0.04577714198413911
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 101.5625
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1595
[CLEANUP], 95thPercentileLatency(us), 10
[CLEANUP], 99thPercentileLatency(us), 1595
[INSERT], Operations, 103634
[INSERT], AverageLatency(us), 11309.044010652875
[INSERT], MinLatency(us), 344
[INSERT], MaxLatency(us), 449279
[INSERT], 95thPercentileLatency(us), 21167
[INSERT], 99thPercentileLatency(us), 213759
[INSERT], Return=OK, 103634
[SCAN], Operations, 1970617
[SCAN], AverageLatency(us), 14013.778746453521
[SCAN], MinLatency(us), 345
[SCAN], MaxLatency(us), 618495
[SCAN], 95thPercentileLatency(us), 61279
[SCAN], 99thPercentileLatency(us), 216575
[SCAN], Return=OK, 1970617

---

（关了 netfilter、设了 noatime、关了 THP、readahead 设为 0）
[OVERALL], RunTime(ms), 1800198
[OVERALL], Throughput(ops/sec), 1115.08400742585
[TOTAL_GCS_PS_Scavenge], Count, 402
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 775
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.043050819965359366
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 402
[TOTAL_GC_TIME], Time(ms), 775
[TOTAL_GC_TIME_%], Time(%), 0.043050819965359366
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 147.125
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2273
[CLEANUP], 95thPercentileLatency(us), 65
[CLEANUP], 99thPercentileLatency(us), 2273
[INSERT], Operations, 100313
[INSERT], AverageLatency(us), 11779.317974739066
[INSERT], MinLatency(us), 348
[INSERT], MaxLatency(us), 446975
[INSERT], 95thPercentileLatency(us), 34783
[INSERT], 99thPercentileLatency(us), 211711
[INSERT], Return=OK, 100313
[SCAN], Operations, 1907059
[SCAN], AverageLatency(us), 14477.641339885133
[SCAN], MinLatency(us), 337
[SCAN], MaxLatency(us), 486399
[SCAN], 95thPercentileLatency(us), 91583
[SCAN], 99thPercentileLatency(us), 216063
[SCAN], Return=OK, 1907059

（关了 netfilter、设了 noatime)
[OVERALL], RunTime(ms), 1800031
[OVERALL], Throughput(ops/sec), 1169.5237470910224
[TOTAL_GCS_PS_Scavenge], Count, 421
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 842
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.04677697217436811
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 421
[TOTAL_GC_TIME], Time(ms), 842
[TOTAL_GC_TIME_%], Time(%), 0.04677697217436811
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 97.0625
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 1514
[CLEANUP], 95thPercentileLatency(us), 21
[CLEANUP], 99thPercentileLatency(us), 1514
[INSERT], Operations, 105507
[INSERT], AverageLatency(us), 11114.304738074252
[INSERT], MinLatency(us), 349
[INSERT], MaxLatency(us), 461823
[INSERT], 95thPercentileLatency(us), 10375
[INSERT], 99thPercentileLatency(us), 213759
[INSERT], Return=OK, 105507
[SCAN], Operations, 1999672
[SCAN], AverageLatency(us), 13810.287913217768
[SCAN], MinLatency(us), 334
[SCAN], MaxLatency(us), 475135
[SCAN], 95thPercentileLatency(us), 188031
[SCAN], 99thPercentileLatency(us), 216447
[SCAN], Return=OK, 1999672

---

### Workload F

#### 16 线程：

第1次：
[OVERALL], RunTime(ms), 1800028
[OVERALL], Throughput(ops/sec), 10705.938463179462
[TOTAL_GCS_PS_Scavenge], Count, 208
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 271
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.015055321361667708
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 208
[TOTAL_GC_TIME], Time(ms), 271
[TOTAL_GC_TIME_%], Time(%), 0.015055321361667708
[READ], Operations, 19270989
[READ], AverageLatency(us), 949.6949580532686
[READ], MinLatency(us), 229
[READ], MaxLatency(us), 301567
[READ], 95thPercentileLatency(us), 1766
[READ], 99thPercentileLatency(us), 2655
[READ], Return=OK, 19270989
[READ-MODIFY-WRITE], Operations, 9632494
[READ-MODIFY-WRITE], AverageLatency(us), 2032.18638796972
[READ-MODIFY-WRITE], MinLatency(us), 649
[READ-MODIFY-WRITE], MaxLatency(us), 301823
[READ-MODIFY-WRITE], 95thPercentileLatency(us), 3273
[READ-MODIFY-WRITE], 99thPercentileLatency(us), 4371
[UPDATE], Operations, 9632494
[UPDATE], AverageLatency(us), 1078.34721994117
[UPDATE], MinLatency(us), 324
[UPDATE], MaxLatency(us), 301311
[UPDATE], 95thPercentileLatency(us), 1953
[UPDATE], 99thPercentileLatency(us), 2847
[UPDATE], Return=OK, 9632494

第2次：
[OVERALL], RunTime(ms), 1783675
[OVERALL], Throughput(ops/sec), 11212.80502333665
[TOTAL_GCS_PS_Scavenge], Count, 221
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 276
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.015473670932204578
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 221
[TOTAL_GC_TIME], Time(ms), 276
[TOTAL_GC_TIME_%], Time(%), 0.015473670932204578
[READ], Operations, 20000000
[READ], AverageLatency(us), 906.65368225
[READ], MinLatency(us), 225
[READ], MaxLatency(us), 272895
[READ], 95thPercentileLatency(us), 1722
[READ], 99thPercentileLatency(us), 2543
[READ], Return=OK, 20000000
[READ-MODIFY-WRITE], Operations, 10001082
[READ-MODIFY-WRITE], AverageLatency(us), 1938.5872583586456
[READ-MODIFY-WRITE], MinLatency(us), 638
[READ-MODIFY-WRITE], MaxLatency(us), 274175
[READ-MODIFY-WRITE], 95thPercentileLatency(us), 3161
[READ-MODIFY-WRITE], 99thPercentileLatency(us), 4127
[UPDATE], Operations, 10001082
[UPDATE], AverageLatency(us), 1027.9169813826145
[UPDATE], MinLatency(us), 308
[UPDATE], MaxLatency(us), 273151
[UPDATE], 95thPercentileLatency(us), 1903
[UPDATE], 99thPercentileLatency(us), 2729
[UPDATE], Return=OK, 10001082

第3次：
[OVERALL], RunTime(ms), 1695745
[OVERALL], Throughput(ops/sec), 11794.22613659483
[TOTAL_GCS_PS_Scavenge], Count, 221
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 270
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.01592220528440302
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 221
[TOTAL_GC_TIME], Time(ms), 270
[TOTAL_GC_TIME_%], Time(%), 0.01592220528440302
[READ], Operations, 20000000
[READ], AverageLatency(us), 861.0331206
[READ], MinLatency(us), 219
[READ], MaxLatency(us), 274687
[READ], 95thPercentileLatency(us), 1618
[READ], 99thPercentileLatency(us), 2393
[READ], Return=OK, 20000000
[READ-MODIFY-WRITE], Operations, 10004630
[READ-MODIFY-WRITE], AverageLatency(us), 1843.4270479767868
[READ-MODIFY-WRITE], MinLatency(us), 611
[READ-MODIFY-WRITE], MaxLatency(us), 276223
[READ-MODIFY-WRITE], 95thPercentileLatency(us), 2983
[READ-MODIFY-WRITE], 99thPercentileLatency(us), 3873
[UPDATE], Operations, 10004630
[UPDATE], AverageLatency(us), 979.0702321824995
[UPDATE], MinLatency(us), 320
[UPDATE], MaxLatency(us), 274431
[UPDATE], 95thPercentileLatency(us), 1796
[UPDATE], 99thPercentileLatency(us), 2573
[UPDATE], Return=OK, 10004630

第4次：
[OVERALL], RunTime(ms), 1754542
[OVERALL], Throughput(ops/sec), 11398.98617416967
[TOTAL_GCS_PS_Scavenge], Count, 221
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 271
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.015445626265999903
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 221
[TOTAL_GC_TIME], Time(ms), 271
[TOTAL_GC_TIME_%], Time(%), 0.015445626265999903
[READ], Operations, 20000000
[READ], AverageLatency(us), 891.12498265
[READ], MinLatency(us), 214
[READ], MaxLatency(us), 273151
[READ], 95thPercentileLatency(us), 1651
[READ], 99thPercentileLatency(us), 2419
[READ], Return=OK, 20000000
[READ-MODIFY-WRITE], Operations, 10001156
[READ-MODIFY-WRITE], AverageLatency(us), 1907.5370139211907
[READ-MODIFY-WRITE], MinLatency(us), 622
[READ-MODIFY-WRITE], MaxLatency(us), 276223
[READ-MODIFY-WRITE], 95thPercentileLatency(us), 3059
[READ-MODIFY-WRITE], 99thPercentileLatency(us), 3971
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 153.375
[CLEANUP], MinLatency(us), 1
[CLEANUP], MaxLatency(us), 2409
[CLEANUP], 95thPercentileLatency(us), 11
[CLEANUP], 99thPercentileLatency(us), 2409
[UPDATE], Operations, 10001156
[UPDATE], AverageLatency(us), 1012.4480069104012
[UPDATE], MinLatency(us), 317
[UPDATE], MaxLatency(us), 273151
[UPDATE], 95thPercentileLatency(us), 1832
[UPDATE], 99thPercentileLatency(us), 2609
[UPDATE], Return=OK, 10001156

---

### Workload A - load

#### 16 线程：

[OVERALL], RunTime(ms), 1934558
[OVERALL], Throughput(ops/sec), 10338.278821312155
[TOTAL_GCS_PS_Scavenge], Count, 291
[TOTAL_GC_TIME_PS_Scavenge], Time(ms), 363
[TOTAL_GC_TIME_%_PS_Scavenge], Time(%), 0.018763976060681562
[TOTAL_GCS_PS_MarkSweep], Count, 0
[TOTAL_GC_TIME_PS_MarkSweep], Time(ms), 0
[TOTAL_GC_TIME_%_PS_MarkSweep], Time(%), 0.0
[TOTAL_GCs], Count, 291
[TOTAL_GC_TIME], Time(ms), 363
[TOTAL_GC_TIME_%], Time(%), 0.018763976060681562
[CLEANUP], Operations, 16
[CLEANUP], AverageLatency(us), 149.9375
[CLEANUP], MinLatency(us), 5
[CLEANUP], MaxLatency(us), 2231
[CLEANUP], 95thPercentileLatency(us), 61
[CLEANUP], 99thPercentileLatency(us), 2231
[INSERT], Operations, 20000000
[INSERT], AverageLatency(us), 1542.30836225
[INSERT], MinLatency(us), 296
[INSERT], MaxLatency(us), 2042879
[INSERT], 95thPercentileLatency(us), 2765
[INSERT], 99thPercentileLatency(us), 5351
[INSERT], Return=OK, 20000000

---

### 配置

dbpath = /data/mongodata/data27017-3.0-test
logpath = /data/mongodata/logs/mongodb-3.0-test-27017.log
port = 27017
fork = true
smallfiles = true
replSet = clu-1
slowms = 50
profile = 1
logappend = true

---

systemLog:
  path: /data/mongodata/logs/mongo-27017.log
  destination: file
  logAppend: true
  logRotate: reopen
  quiet: false
  verbosity: 0
storage:
  dbPath: /data/mongodata/data27017
  directoryPerDB: true
  journal:
    enabled: true
  engine: wiredTiger
  wiredTiger:
    engineConfig:
      cacheSizeGB: 15
      directoryForIndexes: true
    indexConfig:
      prefixCompression: true
processManagement:
  fork: true
  pidFilePath: /data/mongodata/data27017/mongo.pid
net:
  port: 27017
  maxIncomingConnections: 51200
operationProfiling:
  slowOpThresholdMs: 50
  mode: slowOp
replication:
  replSetName: rs0
  oplogSizeMB: 10240
