<!DOCTYPE html>
<html lang="zh-cn">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <title>GitHub &#43; Hugo 搭建个人博客 - Daniel&#39;s blog</title>
  <meta name="renderer" content="webkit" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>

<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">


<meta name="author" content="Daniel Lin" />
  <meta name="description" content="更新： 2018-05-26：主题换成 Even，补充多处内容。 2018-02-11：主题换成 Kiera。 自己搭博客的N个理由 你的笔记非常值钱，" />

  <meta name="keywords" content="load testing, tuning, 性能测试, 调优" />



<meta name="google-site-verification" content="0a3HFkiNXuBV7zv3VJQyVVHctAFi3N6wP3KO6o8vErw" />


<meta name="generator" content="Hugo 0.49.2" />


<link rel="canonical" href="http://tinycedar.com/post/2016/07/20/build-your-own-blog1/" />

<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">




<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>


<link href="/dist/even.min.css?v=3.2.0" rel="stylesheet">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.css" integrity="sha256-7TyXnr2YU040zfSP+rEcz29ggW4j56/ujTPwjMzyqFY=" crossorigin="anonymous">




<meta property="og:title" content="GitHub &#43; Hugo 搭建个人博客" />
<meta property="og:description" content="更新： 2018-05-26：主题换成 Even，补充多处内容。 2018-02-11：主题换成 Kiera。 自己搭博客的N个理由 你的笔记非常值钱，" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://tinycedar.com/post/2016/07/20/build-your-own-blog1/" /><meta property="article:published_time" content="2016-07-20T02:16:04&#43;08:00"/>
<meta property="article:modified_time" content="2018-10-18T03:54:06&#43;08:00"/>

<meta itemprop="name" content="GitHub &#43; Hugo 搭建个人博客">
<meta itemprop="description" content="更新： 2018-05-26：主题换成 Even，补充多处内容。 2018-02-11：主题换成 Kiera。 自己搭博客的N个理由 你的笔记非常值钱，">


<meta itemprop="datePublished" content="2016-07-20T02:16:04&#43;08:00" />
<meta itemprop="dateModified" content="2016-07-20T02:16:04&#43;08:00" />
<meta itemprop="wordCount" content="5036">



<meta itemprop="keywords" content="Hugo,GitHub,Git," />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="GitHub &#43; Hugo 搭建个人博客"/>
<meta name="twitter:description" content="更新： 2018-05-26：主题换成 Even，补充多处内容。 2018-02-11：主题换成 Kiera。 自己搭博客的N个理由 你的笔记非常值钱，"/>

<!--[if lte IE 9]>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
<![endif]-->

<!--[if lt IE 9]>
  <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
<![endif]-->

</head>
<body>
  <div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/" class="logo">Daniel&#39;s blog</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>
<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    <a href="/">
        <li class="mobile-menu-item">Home</li>
      </a><a href="/post/">
        <li class="mobile-menu-item">Archives</li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags</li>
      </a><a href="/categories/">
        <li class="mobile-menu-item">Categories</li>
      </a><a href="/about">
        <li class="mobile-menu-item">About</li>
      </a>
  </ul>
</nav>
  <div class="container" id="mobile-panel">
    <header id="header" class="header">
        <div class="logo-wrapper">
  <a href="/" class="logo">Daniel&#39;s blog</a>
</div>

<nav class="site-navbar">
  <ul id="menu" class="menu">
    <li class="menu-item">
        <a class="menu-item-link" href="/">Home</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/post/">Archives</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/tags/">Tags</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/categories/">Categories</a>
      </li><li class="menu-item">
        <a class="menu-item-link" href="/about">About</a>
      </li>
  </ul>
</nav>
    </header>

    <main id="main" class="main">
      <div class="content-wrapper">
        <div id="content" class="content">
          <article class="post">
    
    <header class="post-header">
      <h1 class="post-title">GitHub &#43; Hugo 搭建个人博客</h1>

      <div class="post-meta">
        <span class="post-time"> 2016-07-20 </span>
        <div class="post-category">
            
              <a href="/categories/10000-Hours/"> 10000 Hours </a>
            
              <a href="/categories/%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/"> 环境搭建 </a>
            
          </div>
        <span class="more-meta"> 约 5036 字 </span>
        <span class="more-meta"> 预计阅读 11 分钟 </span>
        <span id="busuanzi_container_page_pv" class="more-meta"> <span id="busuanzi_value_page_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次阅读 </span>
      </div>
    </header>

    
    
<div class="post-toc" id="post-toc">
  <h2 class="post-toc-title">文章目录</h2>
  
  <div class="post-toc-content always-active">
    <nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#自己搭博客的n个理由">自己搭博客的N个理由</a></li>
<li><a href="#准备工作">准备工作</a>
<ul>
<li><a href="#注册-github">注册 GitHub</a></li>
<li><a href="#安装git">安装Git</a>
<ul>
<li><a href="#mac">Mac</a></li>
<li><a href="#pc">PC</a></li>
</ul></li>
<li><a href="#设置-git-默认用户信息">设置 Git 默认用户信息</a></li>
<li><a href="#创建-github-pages">创建 GitHub Pages</a></li>
</ul></li>
<li><a href="#使用静态网站生成器搭建站点">使用静态网站生成器搭建站点</a>
<ul>
<li><a href="#安装">安装</a>
<ul>
<li><a href="#mac-1">Mac</a></li>
<li><a href="#pc-1">PC</a></li>
</ul></li>
<li><a href="#新建站点">新建站点</a></li>
<li><a href="#下载主题">下载主题</a></li>
<li><a href="#修改配置文件">修改配置文件</a></li>
<li><a href="#编辑默认模板">编辑默认模板</a></li>
<li><a href="#调整样式">调整样式</a></li>
</ul></li>
<li><a href="#写博客">写博客</a>
<ul>
<li><a href="#新建博文">新建博文</a></li>
<li><a href="#编辑博文">编辑博文</a></li>
<li><a href="#资源文件">资源文件</a></li>
<li><a href="#本地预览">本地预览</a></li>
<li><a href="#生成发布页面">生成发布页面</a></li>
</ul></li>
<li><a href="#发布到-github">发布到 GitHub</a></li>
<li><a href="#使用-ssh-密钥登录-github">使用 SSH 密钥登录 GitHub</a>
<ul>
<li><a href="#生成ssh密钥对">生成SSH密钥对</a></li>
<li><a href="#添加-ssh-公钥到-github">添加 SSH 公钥到 GitHub</a></li>
</ul></li>
<li><a href="#发布-hugo-工程源文件到-github">发布 Hugo 工程源文件到 GitHub</a></li>
<li><a href="#结束语">结束语</a></li>
<li><a href="#参考">参考</a></li>
</ul></li>
</ul>
</nav>
  </div>
</div>

    
    

    
    <div class="post-content">
      

<p>更新：</p>

<ul>
<li>2018-05-26：主题换成 Even，补充多处内容。</li>
<li>2018-02-11：主题换成 Kiera。</li>
</ul>

<hr />

<h2 id="自己搭博客的n个理由">自己搭博客的N个理由</h2>

<ul>
<li>你的笔记非常值钱，丢了就等于丢了N年工作经验。</li>
<li>大多数博客网站都满足不了你：

<ul>
<li>倒闭/停止服务/被删库时，你多半没备份。</li>
<li>格式互不兼容，导入导出困难，复制粘贴会乱。</li>
<li>富文本编辑器极其难用。</li>
<li>可配置的地方不够，你讨厌的功能一堆。</li>
</ul></li>
<li>可以使用 Markdown 写博文：

<ul>
<li>任何一个文本编辑器都能写，随时随地。</li>
<li>足够沉浸，让你忘记格式，专注内容。</li>
<li>备份容易：

<ul>
<li>GitHub, GitBook, 有道云笔记，CSDN，博客园，简书等都支持，到处复制粘贴也能得到大致相同的格式。</li>
<li>纯文本本身也有足够可读性，网站/软件不支持也无所谓。</li>
</ul></li>
</ul></li>
<li>GitHub 提供免费空间和 CDN，站点放 GitHub 仓库也方便做版本控制。

<ul>
<li>可以当有道云笔记的图片空间用，弥补 Markdown 笔记无法贴图的缺点。</li>
</ul></li>
<li>可以作为学习新技术的试验田。</li>
</ul>

<hr />

<h2 id="准备工作">准备工作</h2>

<h3 id="注册-github">注册 GitHub</h3>

<p>先注册一个<del>全球最大的同性交友网站</del> <a href="https://github.com/">GitHub</a> 账号。</p>

<ul>
<li>用户名会成为网址的一部分，最好全英文小写，没空格，不太长。<br />

<ul>
<li>例：用户名 <code>tinycedar</code>，对应网址 <code>tinycedar.github.io</code></li>
</ul></li>
</ul>

<hr />

<h3 id="安装git">安装Git</h3>

<h4 id="mac">Mac</h4>

<pre><code class="language-sh">brew install git
</code></pre>

<h4 id="pc">PC</h4>

<p>下载安装 <a href="https://git-scm.com/">Git</a> ，全用默认设置，然后打开 Git 终端。</p>

<ul>
<li>默认工作目录是 Git 安装目录下的 mingw64 文件夹。</li>
<li>路径分隔符使用 <code>/</code> 或 <code>\\</code></li>
</ul>

<hr />

<h3 id="设置-git-默认用户信息">设置 Git 默认用户信息</h3>

<pre><code class="language-sh">git config --global user.name &quot;tinycedar&quot;
git config --global user.email &quot;keith.mork@gmail.com&quot;

# 使用 GitHub 注册的用户名和邮箱
</code></pre>

<p>这台机器上的每个项目提交时默认都会用这些信息。</p>

<hr />

<h3 id="创建-github-pages">创建 GitHub Pages</h3>

<p>在 GitHub 上新建仓库(repository)：</p>

<ul>
<li>名字<strong>必须</strong>为 <em>username</em>.github.io ，如：<code>tinycedar.github.io</code></li>
</ul>

<p>只要往里面提交一个 <code>index.html</code> 文件，就能通过  <a href="https://tinycedar.github.io">https://tinycedar.github.io</a> 访问了。</p>

<p>不过除了前端，没几个人愿意碰 HTML 和 CSS，这么建站实在太2000年代了，生成器用起来。</p>

<hr />

<h2 id="使用静态网站生成器搭建站点">使用静态网站生成器搭建站点</h2>

<p>个人网站/博客通常只需要简单的静态页面，<a href="https://www.staticgen.com/">这类工具</a> 正好可以把 Markdown 文档转换成网页，非常方便。</p>

<p>这里选择 <a href="http://gohugo.io/">Hugo</a>，特点是生成速度非常快（<a href="https://www.youtube.com/watch?v=CdiDYZ51a2o">构建5000篇文章不用10秒</a>），安装配置也不算复杂，适合不想折腾的人。</p>

<p>它最实用的就是实时预览功能，不需要发布到 Github 就能看到改动。</p>

<h3 id="安装">安装</h3>

<h4 id="mac-1">Mac</h4>

<pre><code class="language-sh">brew install hugo

# 查看版本
hugo version

# 查看帮助
man hugo
hugo help
</code></pre>

<h4 id="pc-1">PC</h4>

<p>下载后解压，把 <code>hugo.exe</code> 的路径加进环境变量 <code>Path</code> 就行。</p>

<hr />

<h3 id="新建站点">新建站点</h3>

<p>假设站点文件想放在当前目录的 <code>hugo-blog/</code> 目录下：</p>

<pre><code class="language-sh">hugo new site -f yaml hugo-blog

# -f, --format {yaml|json|toml}    指定 config 和 front matter 的格式，默认 toml。
# 推荐 yaml 格式。
</code></pre>

<p>生成的目录结构如下：</p>

<pre><code class="language-sh">$ cd hugo-blog
$ tree
.
├── archetypes  # 博文模板
│   └── default.md  # 默认模板文件
├── config.yaml  # 主配置文件
├── content  # 存放博文，里面的子目录叫做 section。
├── data  # 生成网站时的配置
├── layouts  # 网页框架，放在这里的文件会比主题里的同名文件优先，可以在不动主题源码的情况下覆盖部分设置。
├── static  # 静态资源，这目录下的文件会原封不动的拷到站点根目录下。
└── themes  # 主题
</code></pre>

<blockquote>
<p><a href="https://gohugo.io/commands/hugo_new_site/">https://gohugo.io/commands/hugo_new_site/</a><br />
<a href="https://gohugo.io/getting-started/directory-structure/">https://gohugo.io/getting-started/directory-structure/</a></p>
</blockquote>

<hr />

<h3 id="下载主题">下载主题</h3>

<p>默认不带主题，从 <a href="https://github.com/spf13/hugoThemes">这里</a> 挑喜欢的下载。</p>

<p>推荐 <a href="http://www.b12.cn/article/NDI2MGIxMg.html">CR</a>（黑白极简）风格的主题，我用的是 <del><a href="https://themes.gohugo.io/steam/">Steam</a></del> <del><a href="https://themes.gohugo.io/hugo-kiera/">Kiera</a></del> <a href="https://themes.gohugo.io/hugo-theme-even/">Even</a> ：</p>

<pre><code class="language-sh">git clone https://github.com/olOwOlo/hugo-theme-even themes/even
</code></pre>

<hr />

<h3 id="修改配置文件">修改配置文件</h3>

<p>编辑 config.yaml，默认值如下：</p>

<pre><code class="language-yaml">baseURL: http://example.org/  # 替换为你的网址
languageCode: en-us  # 中文博客建议改为 zh-cn。如果文章内容不是这里指定的编码，Chrome 会弹出要不要翻译页面的提示。
title: My New Hugo Site  # 替换为你的博客标题
</code></pre>

<p>【重要】建议在配置文件里指定主题，否则每次构建都要通过命令行传參。</p>

<p>如果配置文件和命令行都不指定主题，打开网站只能看到一片空白。</p>

<pre><code class="language-yaml">theme: even
</code></pre>

<p>常用设置：</p>

<pre><code class="language-yaml">googleAnalytics: XXX  # Google Analytics ID
# 多数国外主题只支持 Google 的站点统计，Even 作为国人开发的主题，还支持不蒜子和百度统计。

defaultContentLanguage: zh-cn  # 默认 en，文章内容的默认编码，必须用 &quot;-&quot; 和小写。有些主题支持多语言，这里的设置会改变菜单和按钮的显示语言。
#defaultContentLanguageInSubdir: false  # 如果站点支持多语言，这选项为 true 时，/ 会重定向到对应的语言版本，如 /en/、/zh-cn/ 等。
hasCJKLanguage: true  # 文章内容是否有中日韩文，会影响字数统计。

enableEmoji: true  # 支持表情
enableGitInfo: true  # 开启后可以用 Git 提交时间作为文章最后修改时间。
enableRobotsTXT: true  # 自动生成给搜索引擎爬虫用的 robots.txt。如果你打算手写，可以不启用。
# https://gohugo.io/templates/robots/

metaDataFormat: yaml  # 文章开头的元数据（Hugo 称为 front matter）的格式
preserveTaxonomyNames: true  # 标签名是西欧字母时保留原文，不自动转为对应的英文字母

paginate: 10  # 分页长度，每页显示多少篇博文

# 元数据设置，各种日期的匹配规则。从数组第1个元素开始，匹配不上才到下一个。
frontmatter:
  date: ['date', ':filename', ':default']  # 名为 date 的变量、文件名开头 yyyy-mm-dd- 的前缀、默认
  lastmod: [':git', ':fileModTime', ':default']  # Git 提交时间、文件属性里的修改时间、默认


# https://gohugo.io/content-management/urls/#canonicalization
disablePathToLower: true  # URL 路径区分大小写
permalinks:
  post: /:sections/:year/:month/:day/:slug

# URL 格式，每个 key 对应 content/ 下的一级子目录。
# :sections 代表 content/ 下的目录结构，原样映射成 URL 路径。
# :year、:month、:day 都会从文件前缀 yyyy-mm-dd 里提取。
# :slug 在文章的 front matter 里定义，如果没定义会用文件名。
</code></pre>

<p>其他主题常用，但 Even 不需要的设置：</p>

<pre><code class="language-yaml">disqusShortname: XXX  # Disqus 用户名
# 静态网站只能靠第三方插件实现评论功能，很多国外主题使用 Disqus，但国内访问有点慢，有时加载不出来。
# Even 支持 gitment，用 GitHub issue 当评论，不需要这个。


# 很多主题都使用默认的 Pygments 做语法高亮，设置如下。
# 颜色比较丑而且行号从来对不齐，这也是我放弃 Kiera 转向 Even 的原因之一。
# Even 用 highlight.js 做语法高亮，效果跟 Pygments 完全没得比。

# https://gohugo.io/content-management/syntax-highlighting/
pygmentsCodeFences: true
pygmentsCodeFencesGuessSyntax: true
# https://help.farbox.com/pygments.html
pygmentsStyle: friendly  # {monokai | friendly | vs | autumn | ...}
#pygmentsOptions: &quot;linenos=inline&quot;  # {inline | table}
</code></pre>

<p>除了 Hugo 本身的参数，每个主题都有自己特有的参数，请参考相应主题的官方文档。</p>

<p>Even 可以看看官方的 <a href="https://github.com/olOwOlo/hugo-theme-even/blob/master/exampleSite/config.toml">配置文件示例</a>。</p>

<blockquote>
<p><a href="https://gohugo.io/getting-started/configuration/">https://gohugo.io/getting-started/configuration/</a></p>
</blockquote>

<hr />

<h3 id="编辑默认模板">编辑默认模板</h3>

<p>在 <code>archetype/</code> 下新建 .md 文件，如果文件名跟新建文章时的 SECTIONNAME 一致，则该 section 下的文章都会套用这模板。</p>

<p>找不到匹配的 section 才会套用 <code>default.md</code>。</p>

<p><code>default.md</code> 的默认 front matter：</p>

<pre><code class="language-yaml">---
title: '{{ replace .Name &quot;-&quot; &quot; &quot; | title }}'
date: {{ .Date }}
draft: true
---
</code></pre>

<p>添加常用 front matter（加在分隔符之间）：</p>

<pre><code class="language-yaml">slug: {{ .TranslationBaseName }}  # URL 路径的最后一部分
# .TranslationBaseName 为不带语言标识符的文件名。比如文件名为 foo.en.md，得到 foo
tags: []
categories: []
</code></pre>

<p>另外 Even 主题还配置了一些特有的参数，参见它的 <a href="https://github.com/olOwOlo/hugo-theme-even/blob/master/archetypes/default.md">默认模板</a>。</p>

<blockquote>
<p><a href="https://gohugo.io/content-management/archetypes/">https://gohugo.io/content-management/archetypes/</a><br />
<a href="https://gohugo.io/variables/files/">https://gohugo.io/variables/files/</a></p>
</blockquote>

<hr />

<h3 id="调整样式">调整样式</h3>

<p>如果对主题某些地方不满意，又不想直接改主题源文件，可以去 <code>themes/&lt;主题名&gt;/layouts/</code> 看看都有什么文件，把要改的拷到 <code>layouts/</code> 下。</p>

<p>文件查找顺序大致如下，同名文件在 <code>layouts/</code> 下的比主题里的优先，匹配到 section 名的比 _default 优先。</p>

<pre><code class="language-sh">layouts/&lt;section&gt;/...
themes/&lt;主题名&gt;/layouts/&lt;section&gt;/...
layouts/_default/...
themes/&lt;主题名&gt;/layouts/_default/...
</code></pre>

<blockquote>
<p><a href="https://gohugo.io/templates/lookup-order/#examples-layout-lookup-for-regular-pages">https://gohugo.io/templates/lookup-order/#examples-layout-lookup-for-regular-pages</a></p>
</blockquote>

<hr />

<h2 id="写博客">写博客</h2>

<h3 id="新建博文">新建博文</h3>

<pre><code class="language-sh">hugo new post/2016-07-19-first.md

# 格式：&lt;SECTIONNAME&gt;/&lt;FILENAME&gt;.&lt;FORMAT&gt;
</code></pre>

<p>可以看到在 <code>content/</code> 下生成了 <code>post/</code> 目录，<code>post/</code> 下有 <code>2016-07-19-first.md</code> 文件。</p>

<p>推荐文件名加上日期前缀，因为通常所有博文都放在同一个目录下（这样配置最简单），带日期一眼就能区分新旧文章。</p>

<p><strong>这操作经常用，建议写成脚本</strong>：（例如叫做 <code>new</code>）</p>

<ul>
<li>自动加上当天日期做前缀</li>
<li>section 名默认叫 <code>post</code></li>
<li>因为上面在配置文件里已经设置了把日期前缀提取到 URL 路径，front matter 里的 slug 去掉前缀。</li>
</ul>

<pre><code class="language-sh">#!/bin/bash

[[ -z &quot;$1&quot; ]] &amp;&amp; echo &quot;Usage: $(basename &quot;$0&quot;) FILENAME(without suffix) [SECTIONNAME]&quot; &amp;&amp; exit 1
section_name=${2:-post}

date_prefix=$(date +%Y-%m-%d-)
file_path=&quot;${section_name}/${date_prefix}$1.md&quot;
hugo new &quot;${file_path}&quot;

sed -i '.bak' &quot;s/slug: ${date_prefix}/slug: /&quot; &quot;content/${file_path}&quot;
rm -f &quot;content/${file_path}.bak&quot;

# Mac 的 sed -i 的第1个参数必须为备份文件后缀名
</code></pre>

<h3 id="编辑博文">编辑博文</h3>

<p>用文本编辑器打开刚才生成的文件，可以看见类似如下内容（YAML格式）：</p>

<pre><code class="language-yaml">---
title: &quot;2016 07 19 First&quot;
date: 2018-02-10T23:16:02+08:00
draft: true
---
</code></pre>

<p>（或默认的 TOML 格式）：</p>

<pre><code class="language-toml">+++
date = &quot;2016-07-19T00:12:34+08:00&quot;
draft = true
title = &quot;2016 07 19 first&quot;

+++
</code></pre>

<p>像这样的出现在每篇文章前的元数据叫 <strong>front matter</strong>，<code>---</code> 之间包着的内容会解析为 YAML，<code>+++</code> 之间包着的内容会解析为 TOML。</p>

<p>在下面的空白处用 <a href="https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet">Markdown</a> 格式写正文，如：</p>

<pre><code class="language-md">## Hello Hugo

坚持写博客的好处：

- 记录心得
- 整理思路
- 分享交流
- 求职展示
</code></pre>

<p>完整文件见<a href="https://raw.githubusercontent.com/tinycedar/hugo-blog/master/content/post/2016-07-19-first.md">这里</a>，渲染成 HTML 的效果见 <a href="http://tinycedar.com/post/2016/07/19/first/">这里</a>。</p>

<blockquote>
<p><a href="https://gohugo.io/content-management/front-matter/">https://gohugo.io/content-management/front-matter/</a></p>
</blockquote>

<hr />

<h3 id="资源文件">资源文件</h3>

<p>放到 <code>static/</code> 下，这目录下的所有文件和目录都会原封不动的拷到站点根目录下。</p>

<p>我习惯用的目录结构：</p>

<pre><code class="language-sh">.
├── CNAME
├── css  # CSS 文件目录
├── googleXXX.html  # Google Analytics 的验证网页
├── img  # 图片目录
│   ├── reward  # 特定的主题专门建目录
│   │   ├── alipay.jpg  # 支付宝收款二维码
│   │   └── wechat.png  # 微信赞赏二维码
│   └── post  # 一般的博文配图按年月日建目录
│       └── 2018
│           └── 02
│              └── 28
├── js  # JS 脚本目录
└── robots.txt
</code></pre>

<p>【注意】</p>

<ul>
<li>博文里引用图片时要写完整 URL，前面是实际的域名，后面是相对 <code>static/</code> 目录的路径。

<ul>
<li>例：<code>![微信打赏](http://tinycedar.com/img/wechat_reward_qrcode.png)</code></li>
</ul></li>
<li>Hugo 不会帮你压缩图片，也不提供缩略图，建议提交前用工具处理图片。</li>
<li>不重要的图可以压成 70% jpg，宽度缩到 600px。颜色少可以试试 8色 png。</li>
<li>命令行工具有 <code>imagemagick</code> 用来裁剪和压缩图片，转格式等，<code>exiftool</code> 用来去掉 EXIF 信息。</li>
</ul>

<hr />

<h3 id="本地预览">本地预览</h3>

<p>运行 <code>hugo server</code>，就会启动一个很简单的 HTTP 服务器。浏览器打开 <code>localhost:1313</code> 就能看到生成的网页，样式跟发布到线上完全相同。</p>

<p>之后文件有任何改动都会自动重新构建和刷新浏览器页面。</p>

<p>【注意】</p>

<ul>
<li>运行 <code>hugo server</code> 时，当前工作目录必须为站点根目录（包含配置文件），否则提示 <code>Error: Unable to locate Config file.</code></li>
<li>Hugo 每次生成站点时不会删旧文件，因此推荐把预览和发布目录分开，并且每次生成前把旧目录删除。</li>
</ul>

<p><strong>这操作经常用，建议写成脚本</strong>：（例如叫做 <code>dev_preview</code>）</p>

<pre><code class="language-sh">#!/bin/bash

[[ -d dev ]] &amp;&amp; rm -rf dev
hugo server --buildDrafts --destination dev --disableFastRender

# -D, --buildDrafts[=false]    文章的默认状态是草稿，草稿默认不会构建，必须加上这参数才会生成页面。
# -w, --watch    文件有改动时自动重新构建并刷新浏览器页面。（默认就带这个，不传也行）
# -d, --destination DIR    输出目录。不传这参数的话构建出来的文件只会放在内存里。
# --disableFastRender    有改动时触发完整构建。反正 Hugo 非常快，几百毫秒根本感觉不到。
</code></pre>

<p><code>ctrl + c</code> 结束 hugo server 。</p>

<hr />

<h3 id="生成发布页面">生成发布页面</h3>

<p>首先把要发布的文章的 <code>draft</code> 属性改为 <code>false</code>，运行 <code>hugo</code>。</p>

<p>执行后会生成 <code>public/</code> 目录，可以看到之前的 Markdown 文件转换成了文件夹 + HTML 文件。</p>

<p><strong>这操作经常用，建议写成脚本</strong>：（例如叫做 <code>release</code>）</p>

<pre><code class="language-sh">#!/bin/bash

if [[ -d public ]]; then
    GLOBIGNORE=*.git
    rm -rf -v public/*
fi

hugo

if [[ -n &quot;$1&quot; ]]; then
    cd public
    git add -A
    git commit -m &quot;$1&quot;
    git push
fi
</code></pre>

<p>再用 <code>hugo server</code> 检查一下有没有 draft 忘了改，确定文章能看到就可以发布了。</p>

<p>这步也可以写成脚本：（例如叫做 <code>preview</code>）</p>

<pre><code class="language-sh">#!/bin/bash

hugo server --disableFastRender
</code></pre>

<p>本地图片由于还没上传，肯定全是叉。介意的话可以先把图传上去，验证过路径都写对了才发布网页。</p>

<hr />

<h2 id="发布到-github">发布到 GitHub</h2>

<p>可以装 GitHub Desktop 或 SourceTree 等客户端，或者直接命令行：</p>

<pre><code class="language-sh">cd public
git init
git remote add origin &quot;git@github.com:tinycedar/tinycedar.github.io.git&quot;  # 替换成你的 GitHub Pages 仓库地址
git add -A
git commit -m &quot;first commit&quot;
git pull
git push -u origin master

# 注意：要用 SSH 的仓库地址才能用公钥，如果用了 HTTPS 的仓库地址，必须每次输用户名密码。
</code></pre>

<p>之后会提示输入在 GitHub 注册的邮箱和密码。</p>

<p>提交成功后，浏览器打开<code>https://tinycedar.github.io</code>，就能看到刚才的页面了。</p>

<p>第一次麻烦点，之后每次提交都很简单：（已经写在上面的 release 脚本里，参数传 true 就会提交和发布）</p>

<pre><code class="language-sh">git add -A
git commit -m &quot;XXX&quot;
git push
</code></pre>

<hr />

<h2 id="使用-ssh-密钥登录-github">使用 SSH 密钥登录 GitHub</h2>

<p>每次发博文都输用户名密码太麻烦，用密钥代替密码就方便多了。</p>

<p>前提是机器只有你一个人用。</p>

<h3 id="生成ssh密钥对">生成SSH密钥对</h3>

<pre><code class="language-sh">mkdir ~/.ssh
cd ~/.ssh
ssh-keygen -t rsa -C &quot;keith.mork@gmail.com&quot;
</code></pre>

<ul>
<li>提示 <code>Enter file in which to save the key</code> 时直接回车，使用默认设置。

<ul>
<li>文件名不用改，GitHub 连接时只认 <code>id_rsa</code></li>
</ul></li>
<li>提示 <code>Enter passphrase</code> 和 <code>Enter same passphrase again</code> 时，可以直接回车，不使用口令（否则每次提交时会要求输入口令）。</li>
</ul>

<blockquote>
<p><a href="https://help.github.com/articles/generating-an-ssh-key/">https://help.github.com/articles/generating-an-ssh-key/</a></p>
</blockquote>

<hr />

<h3 id="添加-ssh-公钥到-github">添加 SSH 公钥到 GitHub</h3>

<ol>
<li>复制公钥文件（默认 <code>~/.ssh/id_rsa.pub</code>）的内容。</li>
<li>登上 GitHub，在个人设置里找到 <code>SSH and GPG keys</code>，新建 SSH key，粘贴进去。</li>
<li>取个容易识别的名字，如 <code>Mac-Home</code> <code>PC-Work</code> 等，保存。</li>
<li>测试是否成功：</li>
</ol>

<pre><code class="language-sh">ssh -T git@github.com  # 用户名就是git，不用改。
</code></pre>

<pre><code class="language-sh"># 如果报错，这样看详细信息：
ssh -vT git@github.com

# 看到以下讯息就是成功了：（虽然命令返回 1）
# You've successfully authenticated, but GitHub does not provide shell access.
</code></pre>

<p>看到 <code>Are you sure you want to continue connecting</code> 时输 <code>yes</code> 回车，然后就可以了。</p>

<p>如果依然每次都问用户名密码，可能是当初加仓库地址时用了 HTTPS 格式，改为 SSH 格式的地址就好了：</p>

<pre><code class="language-sh">git remote set-url origin git@github.com:tinycedar/tinycedar.github.io.git
</code></pre>

<hr />

<h2 id="发布-hugo-工程源文件到-github">发布 Hugo 工程源文件到 GitHub</h2>

<p>源文件比生成的发布文件重要得多，必须备份到 GitHub。发布文件丢了随时重新生成，源文件丢了就没了。</p>

<ul>
<li>在 GitHub 新建仓库，例如叫 <code>hugo-blog</code>，不要勾选创建 README.md 。</li>
<li>在工程根目录下创建 <code>.gitignore</code> 文件，写上不需要备份的目录和文件，例：</li>
</ul>

<pre><code class="language-sh">public
themes
dev
.git
.DS_Store
*.bak
*_bak
*.old
*.log
</code></pre>

<ul>
<li>如果想写项目简介，创建 README.md 文件。</li>
<li>和之前类似的操作：</li>
</ul>

<pre><code class="language-sh">git init
git remote add origin &quot;git@github.com:tinycedar/hugo-blog.git&quot;  # 替换成你的 GitHub 仓库地址
git add -A
git commit -m &quot;first commit&quot;
git pull
git push -u origin master
</code></pre>

<p>如果忘了写 <code>.gitignore</code>，把 public 和 themes 也提交了上去，会发现它们被认为是 submodule （因为里面有 .git 目录）。即使之后设置忽略它们，每次里面的文件有更新时都会出现烦人的子模块状态变更的记录。</p>

<p>解决方法：先把那2个目录复制到别的地方，把它们删掉，写好 <code>.gitignore</code>，在 <code>.git/config</code> 里删掉 <code>[submodule]</code> 相关内容，提交，再把它们搬回来。</p>

<hr />

<h2 id="结束语">结束语</h2>

<p>到这里，一个属于自己的静态博客基本成型了。</p>

<p>可能样式、功能或别的细节不能完全令人满意，但那些基本不影响写文章，可以先专注于输出内容，其他留到以后慢慢优化。</p>

<hr />

<h2 id="参考">参考</h2>

<blockquote>
<p><a href="https://zhuzhangliang.github.io/post/hugo/">基于GitHub Pages + Hugo构建个人博客</a>, 2018-03<br />
<a href="https://pages.github.com/">GitHub Pages</a> (<code>User or organization site</code>下面有手把手教程)<br />
<a href="http://gohugo.io/overview/usage/">http://gohugo.io/overview/usage/</a><br />
<a href="http://blog.coderzh.com/2015/08/29/hugo/">使用hugo搭建个人博客站点</a>, 2015-08<br />
<a href="https://linux.cn/article-8633-1.html">Hugo 对比 Jekyll ：两大领先的静态页面生成器之间的比较</a>, 2017-06</p>
</blockquote>

    </div>

    
    <div class="post-copyright">
  <p class="copyright-item">
    <span class="item-title">文章作者</span>
    <span class="item-content">Daniel Lin</span>
  </p>
  <p class="copyright-item">
    <span class="item-title">上次更新</span>
    <span class="item-content">2018-10-18</span>
  </p>
  
  <p class="copyright-item">
    <span class="item-title">许可协议</span>
    <span class="item-content"><a rel="license" href="http://creativecommons.org/licenses/by-nc/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc/4.0/80x15.png" /></a></span>
  </p>
</div>

    
    
<div class="post-reward">
  <input type="checkbox" name="reward" id="reward" hidden />
  <label class="reward-button" for="reward">赞赏支持</label>
  <div class="qr-code">
    
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/img/reward/wechat.png">
        <span>微信打赏</span>
      </label>
    
      <label class="qr-code-image" for="reward">
        <img class="image" src="/img/reward/alipay.jpg">
        <span>支付宝打赏</span>
      </label>
  </div>
</div>

    <footer class="post-footer">
      <div class="post-tags">
          
          <a href="/tags/Hugo/">Hugo</a>
          
          <a href="/tags/GitHub/">GitHub</a>
          
          <a href="/tags/Git/">Git</a>
          
        </div>

      
      <nav class="post-nav">
        
          <a class="prev" href="/post/2017/10/27/bio-vs-nio-vs-aio/">
            <i class="iconfont icon-left"></i>
            <span class="prev-text nav-default">BIO vs NIO vs AIO</span>
            <span class="prev-text nav-mobile">上一篇</span>
          </a>
        
      </nav>
    </footer>
  </article>
        </div>
        
  <div id="comments-gitment"></div>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitment@0.0.3/style/default.min.css" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/gitment@0.0.3/dist/gitment.browser.min.js" crossorigin="anonymous"></script>
  <script type="text/javascript">
  const gitment = new Gitment({
    id: '2016-07-20 02:16:04 \x2b0800 CST',
    title: 'GitHub \x2b Hugo 搭建个人博客',
    link: decodeURI(location.href),
    desc: '更新： 2018-05-26：主题换成 Even，补充多处内容。 2018-02-11：主题换成 Kiera。 自己搭博客的N个理由 你的笔记非常值钱，',
    owner: 'tinycedar',
    repo: 'blog',
    oauth: {
      client_id: '148b3112a3733187dc84',
      client_secret: 'ec0f9b37322c074fa711b7f31645295e762bce72'
    }
  })
  gitment.render('comments-gitment')
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://github.com/imsun/gitment">comments powered by gitment.</a></noscript>

  

      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="social-links">
      <a href="https://github.com/tinycedar" class="iconfont icon-github" title="github"></a>
      <a href="https://www.douban.com/people/133443683/" class="iconfont icon-douban" title="douban"></a>
  <a href="http://tinycedar.com/index.xml" type="application/rss+xml" class="iconfont icon-rss" title="rss"></a>
</div>

<div class="copyright">
  <span class="power-by">
    由 <a class="hexo-link" href="https://gohugo.io">Hugo</a> 强力驱动
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    主题 - 
    <a class="theme-link" href="https://github.com/olOwOlo/hugo-theme-even">Even</a>
  </span>

  <div class="busuanzi-footer">
    <span id="busuanzi_container_site_pv"> 本站总访问量 <span id="busuanzi_value_site_pv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 次 </span>
    <span class="division">|</span>
    <span id="busuanzi_container_site_uv"> 本站总访客数 <span id="busuanzi_value_site_uv"><img src="/img/spinner.svg" alt="spinner.svg"/></span> 人 </span>
  </div>

  <span class="copyright-year">
    &copy; 
    
      2016 - 
    2018
    <span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Daniel Lin</span>
  </span>
</div>
    </footer>

    <div class="back-to-top" id="back-to-top">
      <i class="iconfont icon-up"></i>
    </div>
  </div>
  
<script src="/lib/highlight/highlight.pack.js?v=20171001"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.2.1/dist/jquery.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/slideout@1.0.1/dist/slideout.min.js" integrity="sha256-t+zJ/g8/KXIJMjSVQdnibt4dlaDxc9zXr/9oNPeWqdg=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.1.20/dist/jquery.fancybox.min.js" integrity="sha256-XVLffZaxoWfGUEbdzuLi7pwaUJv1cecsQJQqGLe7axY=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.min.js" integrity="sha256-jwCP0NAdCBloaIWTWHmW4i3snUNMHUNO+jr9rYd2iOI=" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/timeago.js@3.0.2/dist/timeago.locales.min.js" integrity="sha256-ZwofwC1Lf/faQCzN7nZtfijVV6hSwxjQMwXL4gn9qU8=" crossorigin="anonymous"></script>
<script>  
  var languageCode = "zh-cn".replace(/-/g, '_').replace(/_(.*)/, function ($0, $1) {return $0.replace($1, $1.toUpperCase());});
  timeago().render(document.querySelectorAll('.timeago'), languageCode);
  timeago.cancel();  
</script>

<script></script>
<script src="https://cdn.jsdelivr.net/npm/raphael@2.2.7/raphael.min.js" integrity="sha256-67By+NpOtm9ka1R6xpUefeGOY8kWWHHRAKlvaTJ7ONI=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/flowchart.js@1.8.0/release/flowchart.min.js" integrity="sha256-zNGWjubXoY6rb5MnmpBNefO0RgoVYfle9p0tvOQM+6k=" crossorigin="anonymous"></script><script></script>
<script src="https://cdn.jsdelivr.net/npm/webfontloader@1.6.28/webfontloader.js" integrity="sha256-4O4pS1SH31ZqrSO2A/2QJTVjTPqVe+jnYgOWUVr7EEc=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/snapsvg@0.5.1/dist/snap.svg-min.js" integrity="sha256-oI+elz+sIm+jpn8F/qEspKoKveTc5uKeFHNNVexe6d8=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/underscore@1.8.3/underscore-min.js" integrity="sha256-obZACiHd7gkOk9iIL/pimWMTJ4W/pBsKu+oZnSeBIek=" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/gh/bramp/js-sequence-diagrams@2.0.1/dist/sequence-diagram-min.js" integrity="sha384-8748Vn52gHJYJI0XEuPB2QlPVNUkJlJn9tHqKec6J3q2r9l8fvRxrgn/E5ZHV0sP" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/bramp/js-sequence-diagrams@2.0.1/dist/sequence-diagram-min.css" integrity="sha384-6QbLKJMz5dS3adWSeINZe74uSydBGFbnzaAYmp+tKyq60S7H2p6V7g1TysM5lAaF" crossorigin="anonymous">
<script type="text/javascript" src="/dist/even.min.js?v=3.1.1"></script>
  <script type="text/javascript">
    window.MathJax = {
      tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]},
      showProcessingMessages: false,
      messageStyle: 'none'
    };
  </script>
  <script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML"></script>


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-81240089-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>







</body>
</html>
